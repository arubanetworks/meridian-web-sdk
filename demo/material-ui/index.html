<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Material UI | Meridian Web SDK</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- IE11 polyfill -->
  <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js"></script>
  <link rel="stylesheet" href="../shared.css">

  <!-- Material Design Lite https://getmdl.io/ -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

  <style>
    #meridian-map-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr;
      grid-template-areas: "left center right";
      padding: 20px;
    }

    #meridian-map {
      grid-area: 1 / 1 / last-line / 4;
      margin: -20px;
    }

    #left-column {
      grid-area: left;
    }

    .mdl-card {
      min-width: 330px;
      width: auto;
    }

    .hide {
      display: none;
    }

    #card {
      z-index: 1;
    }
  </style>

</head>

<body>
  <a class="back" href="..">Back to examples</a>
  <div id="meridian-map-container">
    <div id="left-column">
      <div id="card"></div>
    </div>
    <div id="meridian-map"></div>
  </div>
  <script src="/meridian-sdk.js"></script>
  <script>
    MeridianWebSDK.createMap(document.getElementById("meridian-map"), {
      api: MeridianWebSDK.createAPI({
        environment: "staging",
        token: "058d11ddcf1e7c75912e31600c3c0eb0fcee6532"
      }),
      locationID: "5468665088573440",
      floorID: "5653104741580800",
      width: "90%",
      height: "600px",
      markers: {
        placemarks: {
          all: true
        },
        tags: {
          all: true
        }
      },
      onMarkerClick: (marker) => {
        const card = document.getElementById("card");
        card.innerHTML = `
            <div class="demo-card-wide mdl-card mdl-shadow--2dp">
              <div class="mdl-card__title">
                <h2 class="mdl-card__title-text">${marker.name}</h2>
              </div>
              <div class="mdl-card__supporting-text">
                mac: ${marker.mac}
              </div>
              <div class="mdl-card__actions mdl-card--border">
                <img src="${marker.image_url}">
              </div>
              <div class="mdl-card__menu">
                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" onclick="document.getElementById('card').innerHTML = ''">
                  <i class="material-icons">cancel</i>
                </button>
              </div>
            </div>
          `
      },
      onMapClick: (event) => {
        document.getElementById("card").innerHTML = "";
      }
    });
  </script>
</body>

</html>
