/*! For license information please see web-sdk.js.LICENSE.txt */
(()=>{var e={323:(e,t,a)=>{var s={"./aed.svg":852,"./amusement_park.svg":1968,"./atm.svg":5150,"./attraction.svg":1541,"./baggage.svg":3412,"./baggage_carts.svg":2096,"./bank.svg":136,"./bar.svg":5861,"./bike.svg":8113,"./bus.svg":7536,"./cafe.svg":2873,"./cafeteria.svg":3884,"./cashier.svg":9005,"./changing_room.svg":8327,"./changing_station.svg":7126,"./charging_station.svg":6906,"./clinic.svg":9138,"./club.svg":1174,"./coat_check.svg":3826,"./conference_room.svg":1606,"./currency_exchange.svg":7501,"./customer_service.svg":5738,"./desk.svg":9477,"./device_charging.svg":2630,"./elevator.svg":4,"./emergency_dept.svg":2053,"./escalator.svg":4266,"./exclusion_area.svg":2890,"./exhibit.svg":1641,"./exit.svg":9458,"./fire_extinguisher.svg":6624,"./first_aid.svg":1535,"./fitness_center.svg":1902,"./fountain.svg":3614,"./gallery.svg":6848,"./gaming.svg":5781,"./garden.svg":1841,"./gate.svg":5995,"./generic.svg":9101,"./global_entry_office.svg":1393,"./handicap.svg":2914,"./information.svg":8208,"./kiosk.svg":6175,"./lab.svg":7903,"./laptop_lounge.svg":4067,"./lost_found.svg":1833,"./lounge.svg":1900,"./mailbox.svg":2086,"./museum.svg":2002,"./nursing_station.svg":1565,"./operating_room.svg":2515,"./outdoor_area.svg":4525,"./paging_phone.svg":9563,"./parking.svg":8854,"./pet_relief.svg":4975,"./pharmacy.svg":593,"./phone.svg":9338,"./play_area.svg":9484,"./printer.svg":7774,"./registration.svg":9333,"./rental_cars.svg":3622,"./restaurant.svg":2311,"./restroom.svg":4965,"./restroom_ada.svg":2804,"./restroom_family.svg":504,"./restroom_men.svg":5584,"./restroom_men_ada.svg":7073,"./restroom_women.svg":8098,"./restroom_women_ada.svg":3303,"./rewards.svg":8850,"./security.svg":9456,"./security_checkpoint.svg":2453,"./shoe_shine.svg":9519,"./shop.svg":5758,"./spa.svg":7244,"./stadium.svg":1915,"./stairs.svg":2208,"./swimming_pool.svg":646,"./taxi.svg":7342,"./theater.svg":2925,"./ticketing.svg":8034,"./tours.svg":3187,"./train.svg":4340,"./training.svg":6740,"./valet.svg":1644,"./vending_machines.svg":4810,"./water_fountain.svg":9922,"./wedding.svg":2994};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=r,e.exports=o,o.id=323},852:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/aed.svg"},1968:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/amusement_park.svg"},5150:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/atm.svg"},1541:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/attraction.svg"},3412:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/baggage.svg"},2096:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/baggage_carts.svg"},136:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/bank.svg"},5861:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/bar.svg"},8113:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/bike.svg"},7536:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/bus.svg"},2873:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/cafe.svg"},3884:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/cafeteria.svg"},9005:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/cashier.svg"},8327:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/changing_room.svg"},7126:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/changing_station.svg"},6906:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/charging_station.svg"},9138:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/clinic.svg"},1174:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/club.svg"},3826:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/coat_check.svg"},1606:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/conference_room.svg"},7501:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/currency_exchange.svg"},5738:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/customer_service.svg"},9477:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/desk.svg"},2630:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/device_charging.svg"},4:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/elevator.svg"},2053:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/emergency_dept.svg"},4266:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/escalator.svg"},2890:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/exclusion_area.svg"},1641:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/exhibit.svg"},9458:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/exit.svg"},6624:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/fire_extinguisher.svg"},1535:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/first_aid.svg"},1902:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/fitness_center.svg"},3614:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/fountain.svg"},6848:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/gallery.svg"},5781:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/gaming.svg"},1841:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/garden.svg"},5995:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/gate.svg"},9101:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/generic.svg"},1393:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/global_entry_office.svg"},2914:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/handicap.svg"},8208:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/information.svg"},6175:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/kiosk.svg"},7903:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/lab.svg"},4067:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/laptop_lounge.svg"},1833:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/lost_found.svg"},1900:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/lounge.svg"},2086:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/mailbox.svg"},2002:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/museum.svg"},1565:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/nursing_station.svg"},2515:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/operating_room.svg"},4525:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/outdoor_area.svg"},9563:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/paging_phone.svg"},8854:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/parking.svg"},4975:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/pet_relief.svg"},593:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/pharmacy.svg"},9338:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/phone.svg"},9484:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/play_area.svg"},7774:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/printer.svg"},9333:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/registration.svg"},3622:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/rental_cars.svg"},2311:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/restaurant.svg"},4965:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/restroom.svg"},2804:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/restroom_ada.svg"},504:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/restroom_family.svg"},5584:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/restroom_men.svg"},7073:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/restroom_men_ada.svg"},8098:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/restroom_women.svg"},3303:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/restroom_women_ada.svg"},8850:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/rewards.svg"},9456:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/security.svg"},2453:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/security_checkpoint.svg"},9519:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/shoe_shine.svg"},5758:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/shop.svg"},7244:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/spa.svg"},1915:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/stadium.svg"},2208:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/stairs.svg"},646:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/swimming_pool.svg"},7342:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/taxi.svg"},2925:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/theater.svg"},8034:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/ticketing.svg"},3187:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/tours.svg"},4340:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/train.svg"},6740:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/training.svg"},1644:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/valet.svg"},4810:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/vending_machines.svg"},9922:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/water_fountain.svg"},2994:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/placemarks/wedding.svg"},192:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s=a.p+"files/tags/generic.png"},78:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=s(a(5843));t.default=({mapZoomFactor:e,annotations:t})=>(0,o.h)("div",{"data-testid":"meridian--private--annotation-layer"},t.map(((t,a)=>"point"===t.type?(0,o.h)(r.default,Object.assign({key:a},t,{mapZoomFactor:e})):null)))},5843:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(5403),o=a(2785),r=a(7746),i=({mapZoomFactor:e,x:t,y:a,size:o=24,backgroundColor:i="hsl(207, 65%, 46%)",backgroundSize:c="cover",backgroundImage:d,title:p,onClick:h,data:u={}})=>(0,s.h)("div",{className:n,style:{"--meridian-annotationPoint-x":`${t}px`,"--meridian-annotationPoint-y":`${a}px`,"--meridian-annotationPoint-scale":1/e,"--meridian-annotationPoint-size":`${o}px`,"--meridian-annotationPoint-backgroundColor":i,"--meridian-annotationPoint-backgroundSize":c,"--meridian-annotationPoint-backgroundImage":d?`url('${d}')`:"none",cursor:h?"pointer":"initial"},onClick:h?()=>(0,r.asyncClientCall)(h,u):void 0,"data-testid":"meridian--private--annotation-point"},p?(0,s.h)("div",{className:l,"data-testid":"meridian--private--annotation-point-title"},p):null),n=(0,o.css)({label:"AnnotationPoint",position:"absolute",top:"var(--meridian-annotationPoint-y)",left:"var(--meridian-annotationPoint-x)",transform:"translate(-50%, -50%) scale(var(--meridian-annotationPoint-scale))",width:"var(--meridian-annotationPoint-size)",height:"var(--meridian-annotationPoint-size)",backgroundColor:"var(--meridian-annotationPoint-backgroundColor)",backgroundImage:"var(--meridian-annotationPoint-backgroundImage)",backgroundSize:"var(--meridian-annotationPoint-backgroundSize)",backgroundRepeat:"no-repeat",backgroundPosition:"center",borderRadius:9999,userSelect:"none"}),l=(0,o.css)(o.mixins.textStrokeWhite,{label:"AnnotationPoint-Label",marginLeft:"50%",position:"absolute",minWidth:55,maxWidth:120,fontSize:14,textAlign:"center",marginTop:"var(--meridian-annotationPoint-size)",paddingTop:4,color:"#222",userSelect:"none",transform:"translate(-50%, 0)",fontWeight:"bold"});i.displayName="AnnotationPoint",t.default=i},2150:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(a(3669)),r=a(5403),i=s(a(2930)),n=s(a(9594)),l=s(a(8828)),c=s(a(6933)),d=a(2785),p=s(a(7866)),h=a(7746);class u extends r.Component{constructor(){super(...arguments),this.state={searchFilter:"",searchType:this.props.showTags?"tags":"placemarks"},this.searchInputRef=(0,r.createRef)(),this.setRadioFilter=e=>{this.setState({searchType:e})}}componentDidMount(){this.searchInputRef.current&&this.searchInputRef.current.focus()}render(){const{floors:e,tagsLoading:t,placemarksLoading:a,toggleAssetListOverlay:s,showTags:i,showPlacemarks:n,language:d}=this.props,u=p.default.lookup("tags",d),f=p.default.lookup("search_tags",d),v=p.default.lookup("placemarks",d),k=p.default.lookup("search_placemarks",d),{searchFilter:b}=this.state,y=(0,h.createSearchMatcher)(b),_=(0,o.default)(e,(e=>e.id)),C={};for(const t of e)C[t.id]=[t.group_name||h.uiText.unnamedBuilding,h.uiText.enDash,t.name].join(" ");return(0,r.h)(l.default,{position:"right",onCloseClicked:()=>{s({open:!1})}},(0,r.h)(c.default,{placeholder:"tags"===this.state.searchType?f:k,value:b,onChange:e=>{this.setState({searchFilter:e})}}),(0,r.h)("div",{className:w(Boolean(i&&n))},i?(0,r.h)(r.Fragment,null,(0,r.h)("input",{type:"radio",name:"searchType",id:"tags",className:O,checked:"tags"===this.state.searchType,onChange:e=>{e.target.checked&&this.setRadioFilter("tags")}}),(0,r.h)("label",{for:"tags",className:x},u)):null,n?(0,r.h)(r.Fragment,null,(0,r.h)("input",{type:"radio",name:"searchType",id:"placemarks",className:O,checked:"placemarks"===this.state.searchType,onChange:e=>{e.target.checked&&this.setRadioFilter("placemarks")}}),(0,r.h)("label",{for:"placemarks",className:x},v)):null),(()=>"tags"===this.state.searchType?(0,r.h)(m,Object.assign({},this.props,{floorToGroup:C,floorsByID:_,match:y,loading:t})):(0,r.h)(g,Object.assign({},this.props,{floorToGroup:C,floorsByID:_,match:y,loading:a})))())}}function m(e){const{currentFloorID:t,updateMap:a,tagOptions:s={},tags:l,loading:c,onTagClick:u,toggleAssetListOverlay:m,match:g,floorsByID:x,floorToGroup:O,language:w}=e,C=p.default.lookup("no_results_found",w),P=l.filter((e=>{const t=x[e.map_id][0];return!t||t.published})).filter((e=>g(e.name||"")||g(e.mac)||(0,h.getTagLabels)(e).some(g))).filter((e=>!0===s.showControlTags||!e.is_control_tag)).sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),S=(0,o.default)(P,(e=>O[e.map_id])),D=Object.keys(S).sort();return D.forEach(((e,a)=>{if(S[e][0].map_id===t){const[e]=D.splice(a,1);D.unshift(e)}})),c?(0,r.h)("div",{className:_},(0,r.h)(i.default,null)):0===P.length?(0,r.h)("div",{className:_},C,"."):(0,r.h)("div",{className:v},D.map((e=>(0,r.h)("div",{key:e},(0,r.h)("div",{className:f},e),S[e].map((e=>(0,r.h)("button",{key:e.id,"data-testid":`meridian--private--overlay-tag-${e.id}`,className:k,onClick:()=>{a({floorID:e.map_id,tags:Object.assign(Object.assign({},s),{filter:()=>!0})}),u(e),m({open:!1})}},(0,r.h)("div",{className:b},(0,r.h)("div",{className:y},e.name||e.mac),(0,r.h)(n.default,{align:"right",labels:(0,h.getTagLabels)(e),fontSize:d.theme.fontSizeSmallest})))))))))}function g(e){const{currentFloorID:t,updateMap:a,placemarkOptions:s={},toggleAssetListOverlay:n,floorToGroup:l,match:c,placemarks:d,onPlacemarkClick:h,floorsByID:u,loading:m,language:g}=e,b=p.default.lookup("no_results_found",g),x=d.filter((e=>{const t=u[e.map][0];return!t||t.published})).filter((e=>e.is_searchable||null===e.is_searchable||void 0===e.is_searchable)).filter((e=>"exclusion_area"!==e.type&&(!0===s.showHiddenPlacemarks||!e.hide_on_map))).filter((e=>c(e.name||"")||c(e.type_name||""))).sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),O=(0,o.default)(x,(e=>l[e.map])),w=Object.keys(O).sort();return w.forEach(((e,a)=>{if(O[e][0].map_id===t){const[e]=w.splice(a,1);w.unshift(e)}})),m?(0,r.h)("div",{className:_},(0,r.h)(i.default,null)):0===x.length?(0,r.h)("div",{className:_},b,"."):(0,r.h)("div",{className:v},w.map((e=>(0,r.h)("div",{key:e},(0,r.h)("div",{className:f},e),O[e].map((e=>(0,r.h)("button",{key:e.id,"data-testid":`meridian--private--overlay-tag-${e.id}`,className:k,onClick:()=>{a({floorID:e.map,placemarks:Object.assign(Object.assign({},s),{filter:()=>!0})}),h(e),n({open:!1})}},(0,r.h)("div",{className:y},e.name||e.type_name))))))))}const f=(0,d.css)({label:"overlay-building-name",top:0,position:"sticky",textTransform:"uppercase",fontWeight:"bold",color:d.theme.brandBlue,background:d.theme.almostWhite,fontSize:d.theme.fontSizeSmaller,padding:10}),v=(0,d.css)({label:"asset-list",overflowY:"auto",flex:"1 1 auto"}),k=(0,d.css)(d.mixins.buttonReset,d.mixins.focusRingMenuItem,d.mixins.buttonHoverActive,{label:"overlay-asset-button",minHeight:56,padding:10,paddingLeft:20,display:"block",width:"100%",textAlign:"left"}),b=(0,d.css)(d.mixins.flexRow,{label:"overlay-asset-button-inner",alignItems:"center"}),y=(0,d.css)({label:"overlay-asset-button-name",flex:"1 1 auto"}),_=(0,d.css)({label:"overlay-asset-list-empty",padding:"60px 20px",textAlign:"center",fontSize:d.theme.fontSizeBigger,color:d.theme.textColorBluish}),x=(0,d.css)({label:"overlay-radio-label",color:"white",padding:"2px 10px 0px 4px"}),O=(0,d.css)({label:"overlay-radio-button",WebkitAppearance:"none",position:"relative",boxSizing:"border-box",border:"1px solid rgb(224,224,225)",width:16,height:16,background:"white",borderRadius:9999,cursor:"pointer",boxShadow:"inset 0 2px 2px rgba(0, 0, 0, 0.1)","&:focus":{outline:"none",borderColor:d.theme.searchBarColor,borderWidth:2},"&:checked":{"--circle-color":d.theme.searchBarColor,"--circle-gap":"4px"},"&:checked::after":{content:'" "',position:"absolute",width:"calc(100% - var(--circle-gap))",height:"calc(100% - var(--circle-gap))",left:"calc(var(--circle-gap) / 2)",top:"calc(var(--circle-gap) / 2)",background:"var(--circle-color)",borderRadius:9999},"&:checked:focus":{"--circle-gap":"4px","--circle-color":d.theme.searchBarColor,borderColor:d.theme.searchBarColor,borderWidth:2}}),w=e=>(0,d.css)({label:"overlay-radio-container",display:e?"flex":"none",flexDirection:"row",justifyContent:"baseline",paddingLeft:10,paddingBottom:10,backgroundColor:"rgb(105, 146, 176)",alignItems:"center"});t.default=u},324:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=s(a(9594)),i=s(a(8828)),n=a(2785),l=a(7746),c=a(4221),d=(0,n.css)({label:"overlay-image",width:"100%",backgroundColor:"white",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}),p=(0,n.css)({label:"overlay-name",fontSize:22}),h=(0,n.css)({label:"overlay-content",padding:"0 20px 15px 20px",overflow:"auto"}),u=(0,n.css)({label:"overlay-tag-data",fontSize:14}),m=(0,n.css)({label:"overlay-placemark-data",fontSize:14});t.default=({kind:e,item:t,toggleDetailsOverlay:a})=>{const s="placemark"===e&&t.image_url?{backgroundImage:`url('${t.image_url}')`,backgroundSize:"contain",height:300,minHeight:220}:"placemark"===e?{backgroundSize:"contain",backgroundImage:`url('${(0,c.placemarkIconURL)(t.type)}')`,backgroundColor:`#${t.color}`,height:300,minHeight:220}:"tag"===e&&t.image_url?{backgroundImage:`url('${t.image_url}')`,height:300}:{background:n.theme.brandBrightBlue,height:300};return(0,o.h)(i.default,{position:"left",onCloseClicked:()=>{a({open:!1})}},(0,o.h)("div",{className:d,style:s}),(0,o.h)("div",{className:(0,n.cx)("meridian-overlay-content",h)},(0,o.h)("p",{className:(0,n.cx)("meridian-overlay-item-name",p)},t.name||t.type_name),"tag"===e?(0,o.h)("div",{className:(0,n.cx)("meridian-overlay-tag-data",u)},(0,o.h)(r.default,{align:"left",labels:(0,l.getTagLabels)(t),fontSize:n.theme.fontSize}),(0,o.h)("p",null,"MAC: ",t.mac)):(0,o.h)("div",{className:(0,n.cx)("meridian-overlay-placemark-description",m),dangerouslySetInnerHTML:function(){if("placemark"===e&&t.description)return{__html:t.description}}()})))}},8812:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=s(a(4145)),i=a(2785),n=(0,i.css)(i.mixins.rounded,{label:"error",position:"absolute",zIndex:4,top:"35%",left:0,right:0,margin:"0 auto",minWidth:300,maxWidth:420,border:"1px solid #dfe1ef",paddingTop:15,paddingRight:20,paddingBottom:15,paddingLeft:25,background:i.theme.white,boxShadow:"0 0 1px rgba(0, 0, 0, 0.15), inset 4px 0 0 #d82e1f"}),l=(0,i.css)(i.mixins.buttonReset,{label:"close",cursor:"pointer",float:"right",width:38,height:38,marginLeft:15,padding:4,fill:"#c3c5c8","&:hover":{fill:i.theme.textColorBluish,cursor:"pointer"},"&:focus":{outline:0}});t.default=({toggleErrorOverlay:e,messages:t=["Unknown"]})=>(0,o.h)("div",{className:n},(0,o.h)("button",{className:l,onClick:()=>{e({open:!1})}},(0,o.h)(r.default,null)),(0,o.h)("p",null,"Sorry, something went wrong. It might be related to:"),(0,o.h)("ul",null,t.map(((e,t)=>(0,o.h)("li",{key:t},e)))))},3169:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(5403),o=a(2785),r=(0,o.css)({label:"floor-and-tag-controls",display:"flex",flexDirection:"column",position:"absolute",zIndex:1,right:15,top:15}),i=(0,o.css)(o.mixins.buttonReset,o.mixins.shadow,o.mixins.rounded,o.mixins.buttonHoverActive,o.mixins.focusRing,{label:"control",cursor:"pointer",background:"white",padding:4,width:40,height:40,border:0,fontSize:20,fontWeight:200,fill:o.theme.brandBrightBlue}),n=(0,o.css)(i,{marginTop:10});t.default=({toggleFloorOverlay:e,toggleAssetListOverlay:t,showFloors:a,showSearch:l})=>(0,s.h)("div",{className:r},l?(0,s.h)("button",{className:(0,o.cx)("meridian-tag-control",i),"data-testid":"meridian--private--tag-control",onClick:()=>{t({open:!0})}},(0,s.h)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36"},(0,s.h)("path",{d:"M26.19 25l-4.12-4.12a7.29 7.29 0 001.44-4.35 7.11 7.11 0 00-7-7.2 7.11 7.11 0 00-7 7.2 7.11 7.11 0 007 7.2 6.83 6.83 0 004.16-1.42l4.1 4.1A1 1 0 0026.19 25zm-14.68-8.49a5.11 5.11 0 015-5.2 5.11 5.11 0 015 5.2 5.11 5.11 0 01-5 5.2 5.11 5.11 0 01-5-5.2z"}))):null,a?(0,s.h)("button",{className:(0,o.cx)("meridian-floor-control",a&&l?n:i),"data-testid":"meridian--private--floor-control",onClick:()=>{e({open:!0})}},(0,s.h)("svg",{viewBox:"0 0 36 36"},(0,s.h)("path",{d:"M28.4 14.09a1.84 1.84 0 0 0-.62-.39l-8.48-3.33a3.61 3.61 0 0 0-1.3-.22 3.56 3.56 0 0 0-1.3.22L8.22 13.7a1.83 1.83 0 0 0-.62.39 1.24 1.24 0 0 0 0 1.82 1.85 1.85 0 0 0 .62.39l8.48 3.34a3.92 3.92 0 0 0 2.59 0l8.48-3.34a1.86 1.86 0 0 0 .62-.39 1.24 1.24 0 0 0 0-1.82m-9.83 3.68a2 2 0 0 1-1.13 0l-7-2.77 7-2.77a2 2 0 0 1 1.13 0l7 2.77zm9.83 2.32a1.24 1.24 0 0 1 0 1.82 1.86 1.86 0 0 1-.62.39l-8.47 3.33a3.92 3.92 0 0 1-2.59 0L8.22 22.3a1.85 1.85 0 0 1-.62-.39 1.24 1.24 0 0 1 0-1.82 1.83 1.83 0 0 1 .62-.39L10 19l2.73 1.08-2.34.92 7 2.77a2 2 0 0 0 1.13 0l7-2.77-2.35-.92L26 19l1.79.7a1.84 1.84 0 0 1 .62.39"}))):null)},6670:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(5403),o=a(2785),r=a(7746),i=(0,o.css)(o.mixins.buttonReset,o.mixins.rounded,o.mixins.overflowEllipses,{label:"floor-control",background:"rgba(0, 0, 0, 0.4)",color:"white",textShadow:"0 0 2px black",position:"absolute",zIndex:1,bottom:15,left:"50%",transform:"translate(-50%, 0)",textAlign:"center",maxWidth:300,padding:"8px 16px",border:0,fontSize:16});t.default=({buildingName:e,floorName:t})=>(0,s.h)("div",{className:(0,o.cx)("meridian-floor-label",i),"data-testid":"meridian--private--floor-label"},e||r.uiText.unnamedBuilding," ",r.uiText.enDash," ",t)},4144:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(a(3669)),r=a(5403),i=s(a(8828)),n=s(a(6933)),l=a(2785),c=s(a(7866)),d=a(7746);class p extends r.Component{constructor(){super(...arguments),this.state={searchFilter:""},this.searchInputRef=(0,r.createRef)()}componentDidMount(){this.searchInputRef.current&&this.searchInputRef.current.focus()}render(){const{currentFloorID:e,toggleFloorOverlay:t,selectFloorByID:a,floors:s,language:p}=this.props,k=c.default.lookup("search_floors",p),b=c.default.lookup("no_results_found",p),{searchFilter:y}=this.state,_=(0,d.createSearchMatcher)(y),x=s.filter((e=>e.published&&(_(e.name||"")||_(e.group_name||d.uiText.unnamedBuilding)))),O=(0,o.default)(x,"group_name"),w=Object.keys(O).sort();""===w[0]&&(w.push(w[0]),w.shift());for(const e of w)O[e].sort(((e,t)=>Math.sign(e.level-t.level))),this.props.sortDescending&&O[e].reverse();return(0,r.h)(i.default,{position:"right",onCloseClicked:()=>{t({open:!1})}},(0,r.h)(n.default,{placeholder:k,value:y,onChange:e=>{this.setState({searchFilter:e})}}),0===w.length?(0,r.h)("div",{className:g},b,"."):(0,r.h)("div",{className:u,"data-testid":"meridian--private--floors-list"},w.map((s=>(0,r.h)("div",{key:s},(0,r.h)("div",{className:h},s||d.uiText.unnamedBuilding),O[s].map((s=>(0,r.h)("button",{key:s.name,onClick:()=>{a(s.id),t({open:!1})},className:(0,l.cx)(m,s.id===e?f:void 0),"data-testid":s.id===e?"meridian--private--current-floor":"meridian--private--floor"},s.name,s.id===e?(0,r.h)("svg",{viewBox:"0 0 10 7",className:v},(0,r.h)("path",{d:"M3.9 7C3.7 7 3.4 6.9 3.2 6.7L0.3 3.8C-0.1 3.4 -0.1 2.8 0.3 2.4C0.7 2 1.3 2 1.7 2.4L3.9 4.6L8.2 0.3C8.6 -0.1 9.2 -0.1 9.6 0.3C10 0.7 10 1.3 9.6 1.7L4.6 6.7C4.4 6.9 4.2 7 3.9 7Z"})):null))))))))}}const h=(0,l.css)({label:"overlay-building-name",textTransform:"uppercase",fontWeight:"bold",top:0,position:"sticky",color:l.theme.brandBlue,background:l.theme.almostWhite,fontSize:l.theme.fontSizeSmaller,padding:10}),u=(0,l.css)({label:"floors-list",overflowY:"auto"}),m=(0,l.css)(l.mixins.buttonReset,l.mixins.focusRingMenuItem,l.mixins.buttonHoverActive,{label:"overlay-floor-button",padding:10,paddingLeft:20,display:"block",width:"100%",textAlign:"left"}),g=(0,l.css)({label:"overlay-floor-list-empty",padding:"60px 20px",textAlign:"center",fontSize:l.theme.fontSizeBigger,color:l.theme.textColorBluish}),f=(0,l.css)({label:"overlay-floor-button-curent-floor",color:l.theme.brandBrightBlue,fill:"currentcolor"}),v=(0,l.css)({label:"floor-checkmark",verticalAlign:"middle",marginLeft:"0.5em",width:"0.8em",height:"0.8em"});t.default=p},4145:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(5403);t.default=()=>(0,s.h)("svg",{viewBox:"0 0 36 36"},(0,s.h)("path",{d:"M19.41 18l6.36-6.36a1 1 0 0 0-1.41-1.41L18 16.59l-6.36-6.36a1 1 0 0 0-1.41 1.41L16.59 18l-6.36 6.36a1 1 0 1 0 1.41 1.41L18 19.41l6.36 6.36a1 1 0 0 0 1.41-1.41z"}))},2930:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(5403),o=a(2785),r=(0,o.keyframes)({from:{transform:"rotate(0turn)"},to:{transform:"rotate(1turn)"}}),i=(0,o.css)({label:"spinner",width:22,height:22,margin:"0 auto",border:"2px rgba(227, 227, 227, 0.9) solid",borderTop:"2px #2e7cbe solid",borderRadius:"50%",animation:`${r} 600ms infinite linear`});t.default=()=>(0,s.h)("div",{className:i})},9594:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(5403),o=a(2785),r=(0,o.css)({label:"label-list",fontSize:"var(--meridian-labelList-fontSize)",marginTop:8,marginLeft:3,textAlign:"var(--meridian-labelList-textAlign)",flex:"1 1 auto"}),i=(0,o.css)(o.mixins.maxRounded,{label:"label",display:"inline-block",padding:"3px 8px",marginBottom:8,marginRight:8,background:"rgba(0, 0, 0, 0.035)",border:"1px solid rgba(0, 0, 0, 0.05)",color:"#3b3b3b"});t.default=({align:e,labels:t,fontSize:a=o.theme.fontSize})=>0===t.length?null:(0,s.h)("div",{className:r,style:{"--meridian-labelList-fontSize":a,"--meridian-labelList-textAlign":e}},t.map(((e,t)=>(0,s.h)("div",{key:t,className:i},e))))},4905:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=a(2785),i=s(a(2930)),n=(0,r.css)({label:"loading",position:"absolute",zIndex:1,width:30,left:0,top:"45%",right:0,overflow:"hidden",margin:"0 auto",color:r.theme.textColor,textAlign:"center",pointerEvents:"none"});t.default=()=>(0,o.h)("div",{className:n},(0,o.h)(i.default,null))},529:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(4870);a(3755);const r=a(5491),i=a(5403),n=s(a(78)),l=s(a(324)),c=s(a(8812)),d=s(a(3169)),p=s(a(6670)),h=s(a(4144)),u=s(a(4905)),m=s(a(6805)),g=s(a(7387)),f=a(2785),v=s(a(8901)),k=s(a(2150)),b=a(7746),y=s(a(5481)),_=s(a(9862));class x extends i.Component{constructor(){super(...arguments),this.state={mapImageURL:void 0,isFloorOverlayOpen:!1,isAssetListOverlayOpen:!1,isMapMarkerOverlayOpen:!1,isErrorOverlayOpen:!1,isPanningOrZooming:!1,loadingSources:{},errors:[],mapTransform:"",mapZoomFactor:.5,floors:[],allPlacemarkData:[],svgURL:void 0,tagsConnection:void 0,tagsStatus:"Connecting",selectedItem:void 0,areTagsLoading:Boolean(this.props.showSearchControl&&this.props.loadTags),arePlacemarksLoading:Boolean(this.props.showSearchControl&&this.props.loadPlacemarks),allTagData:[]},this.isMounted=!1,this.isLoaded=!1,this.fetchAllTagsInitialized=!1,this.fetchAllPlacemarksInitialized=!1,this.mapRef=(0,i.createRef)(),this.mapContainerRef=(0,i.createRef)(),this.mapImageref=(0,i.createRef)(),this.debouncedResizeFn=(0,_.default)(this.handleResize.bind(this),250),this.onTagsInit=()=>{this.props.showSearchControl&&this.props.loadTags&&this.fetchAllTags()},this.onPlacemarksInit=()=>{this.props.showSearchControl&&this.props.loadPlacemarks&&this.fetchAllPlacemarks()},this.updateMap=e=>{const{update:t}=this.props;t(e)},this.toggleAssetListOverlay=({open:e})=>{this.isMounted&&this.setState({isAssetListOverlayOpen:e})},this.toggleFloorOverlay=({open:e})=>{this.isMounted&&this.setState({isFloorOverlayOpen:e})},this.toggleErrorOverlay=({open:e,message:t="Unknown"})=>{this.isMounted&&(e?this.setState((e=>({errors:[...e.errors,t],isErrorOverlayOpen:!0}))):this.setState({isErrorOverlayOpen:!1,errors:[]}))},this.toggleLoadingSpinner=({show:e,source:t="unknown"})=>{this.isMounted&&this.setState((a=>({loadingSources:Object.assign(Object.assign({},a.loadingSources),{[t]:e})})))},this.toggleDetailsOverlay=({open:e,selectedItem:t})=>{this.setState({isMapMarkerOverlayOpen:e,selectedItem:t})},this.selectFloorByID=e=>{if(this.updateMap({floorID:e,annotations:[],overlays:[]}),this.props.onFloorChange){const t=this.state.floors.find((t=>t.id===e));t&&(0,b.asyncClientCall)(this.props.onFloorChange,t)}},this.zoomToPoint=(e,t,a)=>{if(!this.mapSelection)throw new Error("mapSelection is not defined");if(!this.zoomD3)throw new Error("zoomD3 is not defined");const{width:s,height:o}=this.getMapRefSize(),i=r.zoomIdentity.translate(-a*e+s/2,-a*t+o/2).scale(a);this.mapSelection.transition().duration(250).call(this.zoomD3.transform,i)},this.zoomBy=e=>{if(!this.mapSelection)throw new Error("mapSelection is not defined");if(!this.zoomD3)throw new Error("zoomD3 is not defined");this.mapSelection.transition().duration(250).call(this.zoomD3.scaleBy,e)},this.zoomIn=()=>{this.zoomBy(1.5)},this.zoomOut=()=>{this.zoomBy(.5)},this.onClick=e=>{var t,a,s;const o=e.target instanceof Element&&((null===(a=null===(t=this.mapRef.current)||void 0===t?void 0:t.isEqualNode)||void 0===a?void 0:a.call(t,e.target))||(null===(s=this.mapImageref.current)||void 0===s?void 0:s.isEqualNode(e.target)));this.props.onMapClick&&o?(0,b.asyncClientCall)(this.props.onMapClick):o&&this.toggleDetailsOverlay({open:!1})},this.onTagClick=async e=>{let t=!0;const{onTagClick:a=(()=>{})}=this.props;try{const s={preventDefault:()=>{t=!1}};await a(e,s)}catch(e){(0,b.logError)(e)}t&&this.toggleDetailsOverlay({open:!0,selectedItem:e})},this.onPlacemarkClick=async e=>{let t=!0;const{onPlacemarkClick:a=(()=>{})}=this.props;try{const s={preventDefault:()=>{t=!1}};await a(e,s)}catch(e){(0,b.logError)(e)}t&&this.toggleDetailsOverlay({open:!0,selectedItem:e})}}componentDidMount(){this.validateFloorID(),this.isMounted=!0;const{api:e,locationID:t}=this.props;(0,b.isEnvOptions)(e.environment)?t?this.loadData():this.toggleErrorOverlay({open:!0,message:'createMap error: "options.locationID" is required'}):this.toggleErrorOverlay({open:!0,message:`API error: "${e.environment}" is not a valid environment`}),this.intervalAutoDestroy=setInterval((()=>{this.isMounted&&this.mapContainerRef.current&&!this.mapContainerRef.current.isConnected&&this.props.destroy()}),1e3),window.addEventListener("resize",this.debouncedResizeFn)}async loadData(){await this.initializeFloors()}componentDidUpdate(e){if(this.props.locationID!==e.locationID)return this.toggleAssetListOverlay({open:!1}),this.toggleErrorOverlay({open:!1}),this.toggleDetailsOverlay({open:!1}),this.toggleFloorOverlay({open:!1}),this.zoomToDefault(),this.freeMapImageURL(),this.setState({mapImageURL:void 0,allPlacemarkData:[]}),void this.loadData();this.props.loadTags&&this.props.showSearchControl&&!e.showSearchControl&&this.fetchAllTags({forceUpdate:!0}),e.floorID!==this.props.floorID?(this.zoomToDefault(),this.validateFloorID(),this.freeMapImageURL(),this.setState({mapImageURL:void 0}),this.fetchMapImageURL()):this.props.loadPlacemarks&&this.props.showSearchControl&&!e.showSearchControl&&this.fetchAllPlacemarks({forceUpdate:!0})}componentWillUnmount(){this.isMounted=!1,this.fetchAllTagsTimeout&&clearTimeout(this.fetchAllTagsTimeout),this.fetchAllPlacemarksTimeout&&clearTimeout(this.fetchAllPlacemarksTimeout),this.freeMapImageURL(),clearInterval(this.intervalAutoDestroy),window.removeEventListener("resize",this.debouncedResizeFn)}handleResize(){const e=this.mapContainerSize,t=this.getMapRefSize(),{width:a,height:s}=e||{},{width:o,height:r}=t;a===o&&s===r||(this.mapContainerSize=t,this.zoomToDefault())}freeMapImageURL(){this.state.mapImageURL&&URL.revokeObjectURL(this.state.mapImageURL)}async fetchMapImageURL(){const{api:e,locationID:t,floorID:a}=this.props,s=this.getMapData();if(!s)return;const o=await e.fetchSVG(s.svg_url);this.isMounted&&(a===this.props.floorID&&t===this.props.locationID?this.setState({mapImageURL:o}):URL.revokeObjectURL(o))}validateFloorID(){const{floorID:e}=this.props;e||this.toggleErrorOverlay({open:!0,message:'createMap error: "options.floorID" is required'})}fetchAllTags(e={forceUpdate:!1}){if(this.fetchAllTagsInitialized&&!e.forceUpdate)return;const t=async()=>{this.fetchAllTagsInitialized=!0;try{this.fetchAllTagsTimeout&&clearTimeout(this.fetchAllTagsTimeout);const{api:e,locationID:a}=this.props;this.setState({areTagsLoading:!0});let s=[];try{s=await e.fetchTagsByLocation(a)}catch(e){return void(0,b.logError)("Failed to load tags; use `loadTags: false` if this location does not have the tags paid feature")}if(!this.isMounted)return;if(a!==this.props.locationID||!this.props.loadTags)return;this.setState({allTagData:s}),this.fetchAllTagsTimeout=setTimeout(t,3e5)}finally{this.setState({areTagsLoading:!1})}};this.props.loadTags&&t()}showLoadingSpinner(){const{loadingSources:e}=this.state,t=Object.keys(e).some((t=>!0===e[t]));return this.props.onLoadingStateChange&&this.isLoaded!==t&&(this.isLoaded=t,(0,b.asyncClientCall)(this.props.onLoadingStateChange,t)),t}fetchAllPlacemarks(e={forceUpdate:!1}){if(this.fetchAllPlacemarksInitialized&&!e.forceUpdate)return;const t=async()=>{this.fetchAllPlacemarksInitialized=!0;try{this.fetchAllPlacemarksTimeout&&clearTimeout(this.fetchAllPlacemarksTimeout);const{locationID:e,api:a}=this.props;let s=[];this.setState({arePlacemarksLoading:!0});try{if(this.props.loadPlacemarks&&(s=await a.fetchPlacemarksByLocation(e)),!this.isMounted)return;this.setState({allPlacemarkData:s})}catch(e){return void(0,b.logError)("Failed to load placemark data")}this.fetchAllPlacemarksTimeout=setTimeout(t,6e5)}finally{this.setState({arePlacemarksLoading:!1})}};this.props.loadPlacemarks&&t()}async getFloors(){const{locationID:e,api:t}=this.props;let a;try{if(a=await t.fetchFloorsByLocation(e),!this.isMounted)return[]}catch(e){e.response&&e.response.data&&e.response.data.detail&&this.toggleErrorOverlay({open:!0,message:e.response.data.detail})}return a&&a.length||this.toggleErrorOverlay({open:!0,message:"Floor data could not be found."}),a}getMapData(){const{floorID:e}=this.props,{floors:t}=this.state;return t.find((t=>t.id===e))}async initializeFloors(){this.toggleLoadingSpinner({show:!0,source:"map"});const{onFloorsUpdate:e=(()=>{}),locationID:t}=this.props,a=await this.getFloors();this.isMounted&&t===this.props.locationID&&(a&&a.length>0&&this.setState({floors:a},(()=>{this.zoomD3||this.addZoomBehavior(),this.zoomToDefault(),(0,b.asyncClientCall)(e,a),this.fetchMapImageURL()})),this.toggleLoadingSpinner({show:!1,source:"map"}))}addZoomBehavior(){if(this.mapRef.current){const e=()=>{if(!this.mapRef.current)return;const{k:e,x:t,y:a}=(0,r.zoomTransform)(this.mapRef.current),s=`translate(${t}px, ${a}px) scale(${e})`;this.setState({mapTransform:s,mapZoomFactor:e,isPanningOrZooming:!0})},t=()=>{this.setState({isPanningOrZooming:!1})};this.zoomD3=(0,r.zoom)().filter((e=>!this.props.shouldMapPanZoom||this.props.shouldMapPanZoom(e))).duration(250).on("zoom",e).on("end.zoom",t),this.mapSelection=(0,o.select)(this.mapRef.current),this.mapSelection.call(this.zoomD3)}}resetExtents(){var e;null===(e=this.zoomD3)||void 0===e||e.scaleExtent([0,1/0]).translateExtent([[-1/0,-1/0],[1/0,1/0]])}setExtents(e,t){var a;const s=this.props.minZoomLevel,o=this.props.maxZoomLevel;if(this.mapRef.current){const{k:i}=(0,r.zoomTransform)(this.mapRef.current),n=this.getMapRefSize(),l=n.width/i/1.5,c=n.height/i/1.5,d=s&&"number"==typeof s?s:i,p=o&&"number"==typeof o?o:8;null===(a=this.zoomD3)||void 0===a||a.scaleExtent([d,p]).translateExtent([[-l,-c],[e+l,t+c]])}}zoomToDefault(){const e=this.getMapData(),t=this.getMapRefSize(),a=null==e?void 0:e.width,s=null==e?void 0:e.height;this.mapContainerSize=t,a&&s&&this.mapSelection&&this.zoomD3&&(this.resetExtents(),this.mapSelection.call(this.zoomD3.translateTo,a/2,s/2),this.mapSelection.call(this.zoomD3.scaleTo,Math.min(.7*t.width/a,.7*t.height/s)),this.setExtents(a,s))}getMapRefSize(){if(!this.mapRef.current)throw new Error("mapRef is not defined");return{width:this.mapRef.current.clientWidth,height:this.mapRef.current.clientHeight}}centerMap(){const e=this.getMapData(),t=null==e?void 0:e.width,a=null==e?void 0:e.height;t&&a&&this.mapSelection&&this.zoomD3&&this.mapSelection.call(this.zoomD3.translateTo,t/2,a/2)}shouldShowFloors(){const{showFloorsControl:e=!0}=this.props,{floors:t}=this.state;return e&&t.length>1}renderFloorLabel(){const e=this.getMapData();return e?(0,i.h)(p.default,{buildingName:e.group_name,floorName:e.name}):null}renderFloorOverlay(){const{floorID:e,api:t}=this.props,{isFloorOverlayOpen:a,floors:s}=this.state;return a?(0,i.h)(h.default,{currentFloorID:e,floors:s,sortDescending:Boolean(this.props.floorsControlSortDescending),toggleFloorOverlay:this.toggleFloorOverlay,selectFloorByID:this.selectFloorByID,language:t.language}):null}renderAssetListOverlay(){var e;const{floorID:t,loadTags:a,loadPlacemarks:s,tags:o,placemarks:r,api:n}=this.props,{isAssetListOverlayOpen:l,floors:c,allTagData:d,areTagsLoading:p,arePlacemarksLoading:h,allPlacemarkData:u}=this.state;return l&&Boolean(s||a)?(0,i.h)(k.default,{onTagClick:this.onTagClick,onPlacemarkClick:this.onPlacemarkClick,showControlTags:Boolean(null!==(e=null==o?void 0:o.showControlTags)&&void 0!==e&&e),floors:c,tagsLoading:p,placemarksLoading:h,tags:d,tagOptions:o,placemarkOptions:r,updateMap:this.updateMap,currentFloorID:t,toggleAssetListOverlay:this.toggleAssetListOverlay,showTags:Boolean(a),showPlacemarks:Boolean(s),placemarks:u,language:n.language}):null}renderDetailsOverlay(){const{isMapMarkerOverlayOpen:e,selectedItem:t}=this.state;return e&&t?(0,i.h)(l.default,{toggleDetailsOverlay:this.toggleDetailsOverlay,kind:"mac"in t?"tag":"placemark",item:t}):null}renderLoadingSpinner(){return this.showLoadingSpinner()?(0,i.h)(u.default,null):null}renderErrorOverlay(){return this.state.isErrorOverlayOpen?(0,i.h)(c.default,{toggleErrorOverlay:this.toggleErrorOverlay,messages:this.state.errors}):null}render(){const e=this.getMapData(),{mapImageURL:t,selectedItem:a,mapTransform:s,mapZoomFactor:o,isPanningOrZooming:r,errors:l}=this.state,{locationID:c,floorID:p,api:h,tags:u,placemarks:k,overlays:b=[],annotations:_=[],width:x="",height:C="",onTagsUpdate:P,onPlacemarksUpdate:S,showSearchControl:D,loadPlacemarks:I,loadTags:M}=this.props;return(0,i.h)("div",{className:(0,f.cx)("meridian-map-container",O),style:{width:x,height:C},"data-testid":"meridian--private--map-container",ref:e=>{this.mapContainerRef.current=e}},(0,i.h)(y.default,{onZoomIn:this.zoomIn,onZoomOut:this.zoomOut}),this.renderErrorOverlay(),this.renderDetailsOverlay(),this.renderFloorOverlay(),this.renderAssetListOverlay(),this.renderLoadingSpinner(),(0,i.h)(d.default,{showFloors:this.shouldShowFloors(),showSearch:Boolean(D&&(I||M)),toggleFloorOverlay:this.toggleFloorOverlay,toggleAssetListOverlay:this.toggleAssetListOverlay}),this.renderFloorLabel(),(0,i.h)("div",{ref:e=>{this.mapRef.current=e},className:(0,f.cx)("meridian-map-background",w),onClick:this.onClick,style:{width:x,height:C}},(0,i.h)("div",{style:{position:"relative",width:0,height:0,transform:s,transformOrigin:"0 0 0"}},(0,i.h)("img",{src:t,ref:this.mapImageref}),0===l.length&&e?(0,i.h)(i.Fragment,null,(0,i.h)(m.default,{mapZoomFactor:o,overlays:b}),this.props.loadPlacemarks?(0,i.h)(g.default,{selectedItem:a,isPanningOrZooming:r,mapZoomFactor:o,locationID:c,floorID:p,api:h,placemarkOptions:k,onPlacemarkClick:this.onPlacemarkClick,onUpdate:S,toggleLoadingSpinner:this.toggleLoadingSpinner,onInit:()=>{this.onPlacemarksInit()}}):null,this.props.loadTags?(0,i.h)(v.default,{selectedItem:a,isPanningOrZooming:r,mapZoomFactor:o,locationID:c,floorID:p,api:h,tagOptions:u,onTagClick:this.onTagClick,onUpdate:P,toggleLoadingSpinner:this.toggleLoadingSpinner,onInit:()=>{this.onTagsInit()}}):null,(0,i.h)(n.default,{mapZoomFactor:o,annotations:_})):null)))}}x.defaultProps={loadTags:!0,loadPlacemarks:!0,showSearchControl:!0,showFloorsControl:!0,floorsControlSortDescending:!1,shouldMapPanZoom:()=>!0,width:"100%",height:"400px",placemarks:{},tags:{},overlays:[],annotations:[],onTagsUpdate:()=>{},onFloorChange:()=>{},onLoadingStateChange:()=>{},onFloorsUpdate:()=>{}};const O=(0,f.css)({label:"map-container",display:"block",position:"relative",borderRadius:"inherit",background:"#fafafa",color:"#000",fontFamily:"inherit",textAlign:"left"}),w=(0,f.css)({label:"map-outer",borderRadius:"inherit",display:"block",overflow:"hidden"});t.default=x},8828:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=s(a(4145)),i=a(2785),n=(0,i.css)(i.mixins.shadow,i.mixins.rounded,{label:"details-overlay",overflow:"hidden",display:"flex",flexDirection:"column",background:i.theme.white,color:i.theme.textColor,fill:"#000",position:"absolute",margin:0,left:15,top:15,right:15,maxHeight:600,zIndex:2,maxWidth:400}),l=(0,i.css)(n,{marginRight:"auto"}),c=(0,i.css)(n,{marginLeft:"auto"}),d=(0,i.css)(i.mixins.buttonReset,i.mixins.buttonHoverActive,i.mixins.focusRing,{label:"details-overlay-close",cursor:"pointer",position:"absolute",zIndex:2,top:10,right:10,padding:4,width:32,height:32,fontSize:11,textAlign:"center",background:i.theme.white,color:i.theme.textColor,borderRadius:"100%",fontWeight:"bold",boxShadow:"0 0 2px rgba(0, 0, 0, 0.4)"});t.default=({position:e,onCloseClicked:t,children:a})=>(0,o.h)("div",{className:(0,i.cx)("meridian-details-overlay","left"===e?l:c),"data-testid":"meridian--private--map-overlay"},(0,o.h)("button",{className:d,onClick:t,"data-testid":"meridian--private--close-overlay"},(0,o.h)(r.default,null)),a)},7096:function(e,t,a){"use strict";var s=this&&this.__rest||function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]])}return a};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=a(7746),i=e=>{var{defs:t=!1,id:a,className:i,style:n={},cx:l,cy:c,r:d,pathLength:p,fill:h="black",fillOpacity:u="1",stroke:m="none",strokeWidth:g=4,strokeLineJoin:f,strokeLineCap:v,strokeDasharray:k,strokeDashoffset:b,strokeOpacity:y,animate:_={},animateMotion:x={},mpath:O,data:w={},onClick:C,mapZoomFactor:P}=e,S=s(e,["defs","id","className","style","cx","cy","r","pathLength","fill","fillOpacity","stroke","strokeWidth","strokeLineJoin","strokeLineCap","strokeDasharray","strokeDashoffset","strokeOpacity","animate","animateMotion","mpath","data","onClick","mapZoomFactor"]);const D=1/P;let I=null,M=null;const T=Object.assign({transform:`scale(${D})`},n);Object.keys(x).length&&(M=O?(0,o.h)("animateMotion",Object.assign({},x),(0,o.h)("mpath",{xlinkHref:`#${O}`})):(0,o.h)("animateMotion",Object.assign({},x))),Object.keys(_).length&&(I=(0,o.h)("animate",Object.assign({},_)));const L=(0,o.h)("circle",Object.assign({id:a,className:i,style:T,cx:l,cy:c,r:d,"path-length":p,fill:h,"fill-opacity":u,stroke:m,"stroke-width":g/P,"stroke-linejoin":f,"stroke-linecap":v,"stroke-dasharray":k,"stroke-dashoffset":b,"stroke-opacity":y,onClick:C?()=>(0,r.asyncClientCall)(C,w):void 0,cursor:C?"pointer":void 0,"pointer-events":C?"all":void 0},S),I,M);return t?(0,o.h)("defs",null,L):L};i.displayName="OverlayCircle",t.default=i},2865:function(e,t,a){"use strict";var s=this&&this.__rest||function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]])}return a};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=a(7746),i=e=>{var{defs:t=!1,id:a,className:i,style:n={},width:l,height:c,href:d,x:p,y:h,animate:u={},animateMotion:m={},mpath:g,mapZoomFactor:f,onClick:v,data:k={}}=e,b=s(e,["defs","id","className","style","width","height","href","x","y","animate","animateMotion","mpath","mapZoomFactor","onClick","data"]);const y=1/f;let _=null,x=null;const O=Object.assign({transform:`translate(-${l/f/2}px, -${c/f/2}px) scale(${y})`},n);Object.keys(m).length&&(x=g?(0,o.h)("animateMotion",Object.assign({},m),(0,o.h)("mpath",{xlinkHref:`#${g}`})):(0,o.h)("animateMotion",Object.assign({},m))),Object.keys(u).length&&(_=(0,o.h)("animate",Object.assign({},u)));const w=(0,o.h)("image",Object.assign({id:a,className:i,style:O,width:l,height:c,href:d,x:p,y:h,onClick:v?()=>(0,r.asyncClientCall)(v,k):void 0,cursor:v?"pointer":void 0,"pointer-events":v?"all":void 0},b),_,x);return t?(0,o.h)("defs",null,w):w};i.displayName="OverlayImage",t.default=i},6805:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=s(a(7096)),i=s(a(2865)),n=s(a(2578)),l=s(a(3861)),c=s(a(3496)),d=s(a(4012)),p=s(a(9159)),h=(0,a(2785).css)({label:"overlay-layer",position:"absolute",overflow:"visible",top:0,left:0,right:0,bottom:0});t.default=({mapZoomFactor:e,overlays:t})=>(0,o.h)("svg",{className:h,"data-testid":"meridian--private--overlay-layer"},t.map(((t,a)=>{switch(t.type){case"polygon":return(0,o.h)(c.default,Object.assign({key:a},t,{mapZoomFactor:e}));case"polyline":return(0,o.h)(d.default,Object.assign({key:a},t,{mapZoomFactor:e}));case"path":return(0,o.h)(l.default,Object.assign({key:a},t,{mapZoomFactor:e}));case"circle":return(0,o.h)(r.default,Object.assign({key:a},t,{mapZoomFactor:e}));case"image":return(0,o.h)(i.default,Object.assign({key:a},t,{mapZoomFactor:e}));case"marker":return(0,o.h)(n.default,Object.assign({key:a},t,{mapZoomFactor:e}));case"use":return(0,o.h)(p.default,Object.assign({key:a},t,{mapZoomFactor:e}));default:return null}})))},2578:function(e,t,a){"use strict";var s=this&&this.__rest||function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]])}return a};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=e=>{var{defs:t=!0,id:a,className:r,style:i,viewBox:n,refX:l,refY:c,markerWidth:d,markerHeight:p,orient:h,fill:u="none",fillOpacity:m,stroke:g="hsl(207, 65%, 46%)",strokeWidth:f,strokeLineJoin:v,strokeLineCap:k,strokeDasharray:b,strokeDashoffset:y,strokeOpacity:_,shapeElementType:x,shapeElementAttributes:O,mapZoomFactor:w}=e,C=s(e,["defs","id","className","style","viewBox","refX","refY","markerWidth","markerHeight","orient","fill","fillOpacity","stroke","strokeWidth","strokeLineJoin","strokeLineCap","strokeDasharray","strokeDashoffset","strokeOpacity","shapeElementType","shapeElementAttributes","mapZoomFactor"]);let P=null;if(Object.keys(O).length&&x)switch(x){case"path":P=(0,o.h)("path",Object.assign({},O));break;case"polyline":P=(0,o.h)("polyline",Object.assign({},O));break;case"polygon":P=(0,o.h)("polygon",Object.assign({},O));break;case"circle":P=(0,o.h)("circle",Object.assign({},O));break;case"image":P=(0,o.h)("image",Object.assign({},O))}const S=(0,o.h)("marker",Object.assign({id:a,className:r,style:i,viewBox:n,refX:l,refY:c,markerWidth:d,markerHeight:p,orient:h,fill:u,"fill-opacity":m,stroke:g,"stroke-width":f,"stroke-linejoin":v,"stroke-linecap":k,"stroke-dasharray":b,"stroke-dashoffset":y,"stroke-opacity":_},C),P);return t?(0,o.h)("defs",null,S):S};r.displayName="OverlayMarker",t.default=r},3861:function(e,t,a){"use strict";var s=this&&this.__rest||function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]])}return a};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=e=>{var{defs:t=!1,id:a,className:r,style:i={},shape:n,fill:l="none",stroke:c="hsl(207, 65%, 46%)",strokeWidth:d=2,strokeLineJoin:p="miter",strokeLineCap:h="butt",strokeDasharray:u,strokeDashoffset:m,strokeOpacity:g,markerStart:f,markerMid:v,markerEnd:k,animate:b={},animateMotion:y={},mpath:_,mapZoomFactor:x}=e,O=s(e,["defs","id","className","style","shape","fill","stroke","strokeWidth","strokeLineJoin","strokeLineCap","strokeDasharray","strokeDashoffset","strokeOpacity","markerStart","markerMid","markerEnd","animate","animateMotion","mpath","mapZoomFactor"]);let w=null,C=null;Object.keys(y).length&&(C=_?(0,o.h)("animateMotion",Object.assign({},y),(0,o.h)("mpath",{xlinkHref:`#${_}`})):(0,o.h)("animateMotion",Object.assign({},y))),Object.keys(b).length&&(w=(0,o.h)("animate",Object.assign({},b)));const P=(0,o.h)("path",Object.assign({id:a,className:r,style:i,d:n,fill:l,stroke:c,"stroke-width":d/x,"stroke-linejoin":p,"stroke-linecap":h,"stroke-dasharray":u,"stroke-dashoffset":m,"stroke-opacity":g,"marker-start":f,"marker-mid":v,"marker-end":k},O),w,C);return t?(0,o.h)("defs",null,P):P};r.displayName="OverlayPath",t.default=r},3496:function(e,t,a){"use strict";var s=this&&this.__rest||function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]])}return a};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=a(7746),i=e=>{var{defs:t=!1,id:a,className:i,style:n,points:l,fill:c="hsla(207, 65%, 46%,  0.5)",fillOpacity:d,stroke:p="hsl(207, 65%, 46%)",strokeWidth:h=2,strokeLineJoin:u="miter",strokeDasharray:m,strokeDashoffset:g,strokeOpacity:f,markerStart:v,markerMid:k,markerEnd:b,mapZoomFactor:y,animate:_={},data:x={},onClick:O}=e,w=s(e,["defs","id","className","style","points","fill","fillOpacity","stroke","strokeWidth","strokeLineJoin","strokeDasharray","strokeDashoffset","strokeOpacity","markerStart","markerMid","markerEnd","mapZoomFactor","animate","data","onClick"]);let C=null;Object.keys(_).length&&(C=(0,o.h)("animate",Object.assign({},_)));const P=(0,o.h)("polygon",Object.assign({id:a,className:i,style:n,points:l.join(" "),fill:c,"fill-opacity":d,stroke:p,"stroke-width":h/y,"stroke-linejoin":u,"stroke-dasharray":m,"stroke-dashoffset":g,"stroke-opacity":f,"marker-start":v,"marker-mid":k,"marker-end":b,onClick:O?()=>(0,r.asyncClientCall)(O,x):void 0,cursor:O?"pointer":void 0,"pointer-events":O?"all":void 0},w),C);return t?(0,o.h)("defs",null,P):P};i.displayName="OverlayPolygon",t.default=i},4012:function(e,t,a){"use strict";var s=this&&this.__rest||function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]])}return a};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=e=>{var{defs:t=!1,id:a,className:r,style:i,points:n,fill:l="none",fillOpacity:c,stroke:d="hsl(207, 65%, 46%)",strokeWidth:p=2,strokeLineJoin:h="miter",strokeLineCap:u="butt",strokeDasharray:m,strokeDashoffset:g,strokeOpacity:f,markerStart:v,markerMid:k,markerEnd:b,animate:y={},mapZoomFactor:_}=e,x=s(e,["defs","id","className","style","points","fill","fillOpacity","stroke","strokeWidth","strokeLineJoin","strokeLineCap","strokeDasharray","strokeDashoffset","strokeOpacity","markerStart","markerMid","markerEnd","animate","mapZoomFactor"]);let O=null;Object.keys(y).length&&(O=(0,o.h)("animate",Object.assign({},y)));const w=(0,o.h)("polyline",Object.assign({id:a,className:r,style:i,points:n.join(" "),fill:l,"fill-opacity":c,stroke:d,"stroke-width":p/_,"stroke-linejoin":h,"stroke-linecap":u,"stroke-dasharray":m,"stroke-dashoffset":g,"stroke-opacity":f,"marker-start":v,"marker-mid":k,"marker-end":b},x),O);return t?(0,o.h)("defs",null,w):w};r.displayName="OverlayPolyline",t.default=r},6933:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(5403),o=a(2785);class r extends s.Component{constructor(){super(...arguments),this.input=null}componentDidMount(){this.input&&this.input.focus()}render(){const{value:e,onChange:t,placeholder:a}=this.props;return(0,s.h)("div",{className:l},(0,s.h)("svg",{viewBox:"0 0 15 15",className:n},(0,s.h)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2454 12.5741L9.55123 8.73956C10.2134 7.80246 10.5682 6.66953 10.5632 5.50756C10.5506 2.47441 8.18614 0.0175744 5.26286 5.57178e-05C3.8639 -0.00651157 2.52051 0.567712 1.53197 1.59481C0.543427 2.6219 -0.0081584 4.01655 9.12228e-05 5.46806C0.0127262 8.50148 2.37737 10.9585 5.30093 10.9761C6.42539 10.9811 7.52128 10.6088 8.42505 9.91456L8.4289 9.91156L12.1197 13.7431C12.3193 13.9603 12.6166 14.0482 12.8966 13.9728C13.1765 13.8973 13.395 13.6704 13.4675 13.3799C13.5399 13.0894 13.455 12.7809 13.2454 12.5741ZM5.29738 9.87819C2.95866 9.86423 1.06697 7.8988 1.05671 5.47219C1.0504 4.31114 1.4917 3.19564 2.28239 2.37403C3.07307 1.55242 4.14751 1.09287 5.26653 1.09769C7.60525 1.11165 9.49694 3.07709 9.5072 5.50369C9.51352 6.66475 9.07221 7.78024 8.28152 8.60186C7.49084 9.42347 6.4164 9.88302 5.29738 9.87819Z",transform:"translate(0.637695)"})),(0,s.h)("input",{"data-testid":"meridian--private--overlay-search",value:e,type:"text",placeholder:a,className:i,onInput:e=>{e.target instanceof HTMLInputElement&&t(e.target.value)},ref:e=>{this.input=e}}))}}const i=(0,o.css)(o.mixins.buttonReset,o.mixins.rounded,o.mixins.focusRing,{label:"overlay-search-input",flex:"1 1 auto",marginRight:42,fontSize:16,padding:"4px 8px",paddingLeft:30,background:o.theme.borderColor,color:o.theme.black,border:0,height:24,"&::placeholder":{color:o.theme.textColorBluishLightGrey}}),n=(0,o.css)({label:"overlay-search-icon",position:"absolute",zIndex:1,fill:o.theme.textColorBluish,width:16,height:16,top:18,left:18}),l=(0,o.css)({label:"overlay-search-bar",position:"relative",zIndex:1,flex:"0 0 auto",display:"flex",flexDirection:"column",padding:10,backgroundColor:"rgb(105, 146, 176)"});t.default=r},9159:function(e,t,a){"use strict";var s=this&&this.__rest||function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]])}return a};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=e=>{var{defs:t=!1,id:a,className:r,style:i={},width:n,height:l,href:c,x:d,y:p,fill:h="none",stroke:u="hsl(207, 65%, 46%)",strokeWidth:m=2,strokeLineJoin:g="miter",strokeLineCap:f="butt",strokeDasharray:v,strokeDashoffset:k,strokeOpacity:b,animate:y={},animateMotion:_={},mpath:x,mapZoomFactor:O}=e,w=s(e,["defs","id","className","style","width","height","href","x","y","fill","stroke","strokeWidth","strokeLineJoin","strokeLineCap","strokeDasharray","strokeDashoffset","strokeOpacity","animate","animateMotion","mpath","mapZoomFactor"]);const C=1/O;let P=null,S=null;const D=Object.assign({transform:`translate(-${n/O/2}px, -${l/O/2}px) scale(${C})`},i);Object.keys(_).length&&(S=x?(0,o.h)("animateMotion",Object.assign({},_),(0,o.h)("mpath",{xlinkHref:`#${x}`})):(0,o.h)("animateMotion",Object.assign({},_))),Object.keys(y).length&&(P=(0,o.h)("animate",Object.assign({},y)));const I=(0,o.h)("use",Object.assign({id:a,className:r,style:D,width:n,height:l,href:c,x:d,y:p,fill:h,stroke:u,"stroke-width":m/O,"stroke-linejoin":g,"stroke-linecap":f,"stroke-dasharray":v,"stroke-dashoffset":k,"stroke-opacity":b},w),P,S);return t?(0,o.h)("defs",null,I):I};r.displayName="OverlayUse",t.default=r},2858:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(5403),o=a(2785),r=a(7746),i=a(4221),n=(0,o.css)(o.mixins.textStrokeWhite,{label:"placemark-label",marginLeft:"50%",position:"absolute",minWidth:55,maxWidth:120,fontSize:14,textAlign:"center",paddingTop:4,color:"#222",userSelect:"none",transform:"translate(-50%, 0)",fontWeight:"bold",visibility:"hidden",pointerEvents:"none","[data-meridian-placemark-label-mode='always'] > &":{visibility:"visible"},"[data-meridian-placemark-label-mode='never'] > &":{visibility:"hidden"},"[data-meridian-placemark-label-mode='hover']:hover > &":{visibility:"visible",background:"#333",color:"#eee",textShadow:"none",borderRadius:4,padding:4,bottom:30,maxWidth:240,width:"max-content",boxShadow:"0 0 1px 1px white"},"[data-meridian-placemark-label-mode='zoom'] > &[data-meridian-placemark-label-zoom-visible='false']":{visibility:"hidden"},"[data-meridian-placemark-label-mode='zoom'] > &[data-meridian-placemark-label-zoom-visible='true']":{visibility:"visible"}}),l=(0,o.css)({label:"placemark-labelOnly",textTransform:"uppercase",color:"#666",fontSize:16}),c=(0,o.css)({label:"placemark",position:"absolute","&[data-meridian-placemark-label-mode='hover']:hover":{zIndex:1}}),d=(0,o.css)(o.mixins.buttonReset,o.mixins.pointer,o.mixins.focusNone,{label:"placemark-icon","--meridian-placemark-backgroundColor":o.theme.brandBlue,transition:"width 80ms ease, height 80ms ease",display:"block",width:24,height:24,borderRadius:"100%",backgroundColor:"var(--meridian-placemark-backgroundColor)",backgroundImage:"var(--meridian-placemark-iconURL)",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",border:"2px solid transparent",overflow:"hidden",zIndex:1}),p=(0,o.css)(d,{zIndex:3,width:30,height:30,boxShadow:"0 0 4px black"});t.default=({isSelected:e,data:t,mapZoomFactor:a,onClick:h=(()=>{}),disabled:u=!1,labelMode:m,labelZoomLevel:g=.2})=>{const f=`meridian-placemark-type-${t.type}`,v=!t.type||0===t.type.indexOf("label_"),k=1/a,b=`#${t.color}`,y=(0,i.placemarkIconURL)(t.type),_=(t.id||"").split("_").pop(),x=e?(0,o.cx)("meridian-placemark-icon-selected","meridian-placemark-icon",f,p):(0,o.cx)("meridian-placemark-icon",f,d),O={left:t.x,top:t.y,transform:`translate(-50%, -50%) scale(${k})`};return v?(0,s.h)("div",{className:(0,o.cx)("meridian-placemark",c),"data-meridian-placemark-label-mode":"zoom",style:O},(0,s.h)("div",{className:(0,o.cx)(n,l,"meridian-label","meridian-label-only"),"data-meridian-placemark-id":_,"data-meridian-placemark-label-zoom-visible":String(a>=g)},t.name)):(0,s.h)("div",{"data-meridian-placemark-label-mode":m,className:(0,o.cx)("meridian-placemark",c),style:O},(0,s.h)("button",{disabled:u,className:(0,o.cx)((0,r.getPlacemarkCategories)(t).map((e=>`meridian-placemark-category-${e=e.replace(/ /g,"-").replace(/[^a-z0-9_-]/i,"").toLowerCase()}`)),x),"data-meridian-placemark-id":_,style:{"--meridian-placemark-iconURL":`url('${y}')`,"--meridian-placemark-borderColor":b,"--meridian-placemark-backgroundColor":b},onClick:e=>{e.target instanceof HTMLElement&&e.target.focus(),h(t)},onMouseDown:e=>{e.stopPropagation()}}),(0,s.h)("div",{className:(0,o.cx)("meridian-label",n),"data-meridian-placemark-label-zoom-visible":String(a>=g)},t.name))}},7387:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=s(a(2858)),i=a(7746);class n extends o.Component{constructor(){super(...arguments),this.state={fetchedPlacemarks:[]},this.isMounted=!1}componentDidMount(){this.isMounted=!0,this.fetchPlacemarks()}shouldComponentUpdate(e){return!(this.props.isPanningOrZooming&&e.mapZoomFactor===this.props.mapZoomFactor)}async componentDidUpdate(e,t){const{placemarkOptions:a,onUpdate:s}=this.props;if(e.floorID!==this.props.floorID&&await this.fetchPlacemarks(),s&&(t.fetchedPlacemarks!==this.state.fetchedPlacemarks||a!==e.placemarkOptions)){const e=this.state.fetchedPlacemarks;(0,i.asyncClientCall)(s,{allPlacemarks:e,filteredPlacemarks:this.getFilteredPlacemarks(e)})}}componentWillUnmount(){this.isMounted=!1}async fetchPlacemarks(){if(!this.isMounted)return;const{locationID:e,floorID:t,api:a,toggleLoadingSpinner:s,onInit:o}=this.props;s({show:!0,source:"placemarks"});const r=await a.fetchPlacemarksByFloor(e,t);this.setState({fetchedPlacemarks:r},(()=>{s({show:!1,source:"placemarks"})})),o()}getFilteredPlacemarks(e){var t;const{placemarkOptions:a,floorID:s}=this.props,o=null!==(t=null==a?void 0:a.filter)&&void 0!==t?t:()=>!0;return e.filter((e=>"exclusion_area"!==e.type&&e.map===s&&(!0===(null==a?void 0:a.showHiddenPlacemarks)||!e.hide_on_map))).filter(o)}render(){const e=this.getFilteredPlacemarks(this.state.fetchedPlacemarks);return(0,o.h)("div",{"data-testid":"meridian--private--placemark-layer"},e.map((e=>{var t,a,s,i;return(0,o.h)(r.default,{key:e.id,isSelected:!!this.props.selectedItem&&this.props.selectedItem.id===e.id,mapZoomFactor:this.props.mapZoomFactor,data:e,onClick:this.props.onPlacemarkClick,disabled:null===(t=this.props.placemarkOptions)||void 0===t?void 0:t.disabled,labelMode:null!==(s=null===(a=this.props.placemarkOptions)||void 0===a?void 0:a.labelMode)&&void 0!==s?s:"zoom",labelZoomLevel:null===(i=this.props.placemarkOptions)||void 0===i?void 0:i.labelZoomLevel})})))}}t.default=n},3996:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(5403),r=s(a(192)),i=a(2785),n=a(7746),l=(0,i.css)(i.mixins.shadow,i.mixins.buttonReset,i.mixins.pointer,i.mixins.focusNone,{label:"tag",width:48,height:48,borderRadius:"100%",position:"absolute",backgroundColor:"white",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",border:"2px solid white",overflow:"hidden",transition:"\n      width 80ms ease,\n      height 80ms ease,\n      top 500ms ease,\n      left 500ms ease\n    ",zIndex:2}),c=(0,i.css)(l,{width:60,height:60,zIndex:3,boxShadow:"0 0 0 2px white, 0 0 4px black"});t.default=({isSelected:e,data:t,mapZoomFactor:a,onClick:s=(()=>{}),disabled:d=!1})=>{const p=1/a/(a<.2?1.4:1),h=t.image_url||r.default;return(0,o.h)("button",{"data-meridian-tag-id":t.id,disabled:d,className:(0,i.cx)("meridian-tag",l,(0,n.getTagLabels)(t).map((e=>`meridian-tag-label-${e=e.replace(/ /g,"-").replace(/[^a-z0-9_-]/i,"")}`)),e&&["meridian-tag-selected",c],(0,i.css)({backgroundImage:`url('${h}')`})),style:{left:t.x,top:t.y,transform:`translate(-50%, -50%) scale(${p})`},onClick:e=>{e.target instanceof HTMLElement&&e.target.focus(),s(t)},onMouseDown:e=>{e.stopPropagation()}})}},8901:function(e,t,a){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(a(1389)),r=a(5403),i=s(a(3996)),n=a(7746);class l extends r.Component{constructor(){var e;super(...arguments),this.state={tagsByMAC:{},connectionsByFloorID:{}},this.tagUpdates={},this.isMounted=!1,this.commitTagUpdates=(0,o.default)((()=>{this.isMounted&&this.setState((e=>({tagsByMAC:Object.assign(Object.assign({},e.tagsByMAC),this.tagUpdates)})),(()=>{this.tagUpdates={},this.onUpdate()}))}),(null===(e=this.props.tagOptions)||void 0===e?void 0:e.updateInterval)||5e3),this.onUpdate=()=>{const{tagsByMAC:e}=this.state,{onUpdate:t,tagOptions:a={}}=this.props,{filter:s=(()=>!0)}=a,o=this.filterControlTags(Object.values(e)),r=o.filter(s);t&&t({allTags:o,filteredTags:r})}}componentDidMount(){this.isMounted=!0;const{floorID:e}=this.props;e&&this.connect(e)}shouldComponentUpdate(e){return!(this.props.isPanningOrZooming&&e.mapZoomFactor===this.props.mapZoomFactor)}componentDidUpdate(e){e.floorID!==this.props.floorID&&(this.disconnect(e.floorID),this.connect(this.props.floorID))}componentWillUnmount(){this.isMounted=!1,this.disconnect(this.props.floorID)}connect(e){const{locationID:t,api:a,toggleLoadingSpinner:s,onInit:o}=this.props;s({show:!0,source:"tags"});const r=a.openStream({locationID:t,floorID:e,onInitialTags:t=>{e===this.props.floorID&&this.isMounted&&(this.setState({tagsByMAC:(0,n.keyBy)(t,(e=>e.mac))},(()=>{this.onUpdate(),this.props.toggleLoadingSpinner({show:!1,source:"tags"})})),o())},onTagUpdate:t=>{e===this.props.floorID&&this.isMounted&&(e!==t.map_id?this.setState((e=>({tagsByMAC:(0,n.objectWithoutKey)(e.tagsByMAC,t.mac)})),(()=>{this.onUpdate()})):(this.tagUpdates=Object.assign(Object.assign({},this.tagUpdates),{[t.mac]:t}),this.props.isPanningOrZooming||this.commitTagUpdates()))},onException:()=>{this.props.toggleLoadingSpinner({show:!1,source:"tags"})}});this.isMounted&&this.setState((t=>({connectionsByFloorID:Object.assign(Object.assign({},t.connectionsByFloorID),{[e]:r})})),(()=>{this.onUpdate()}))}disconnect(e){const t=this.state.connectionsByFloorID[e];t&&(this.props.toggleLoadingSpinner({show:!1,source:"tags"}),t.close()),this.tagUpdates={},this.isMounted&&this.setState((t=>({tagsByMAC:{},connectionsByFloorID:(0,n.objectWithoutKey)(t.connectionsByFloorID,e)})),(()=>{this.onUpdate()}))}filterControlTags(e){const{tagOptions:t}=this.props;return e.filter((e=>!0===(null==t?void 0:t.showControlTags)||!e.is_control_tag))}render(){const{selectedItem:e,tagOptions:t={},onTagClick:a,mapZoomFactor:s}=this.props,{tagsByMAC:o}=this.state,{filter:n=(()=>!0)}=t,l=Object.values(o);return(0,r.h)("div",{"data-testid":"meridian--private--tag-layer"},this.filterControlTags(l).filter(n).map((o=>(0,r.h)(i.default,{key:o.mac,isSelected:!!e&&e.mac===o.mac,mapZoomFactor:s,data:o,onClick:a,disabled:t.disabled}))))}}t.default=l},7866:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a={en:{tags:"Tags",placemarks:"Placemarks",floors:"Floors",search:"Search",search_tags:"Search Tags",search_placemarks:"Search Placemarks",search_floors:"Search Floors",no_results_found:"No results found",close:"Close"},ar:{tags:"",placemarks:"  ",floors:" ",search:" ",search_tags:"   ",search_placemarks:"    ",search_floors:"   ",no_results_found:"     ",close:""},ca:{tags:"Etiquetes",placemarks:"Marques de posici",floors:"Pisos",search:"Cerca",search_tags:"Cerca etiquetes",search_placemarks:"Cerca marcadors de posici",search_floors:"Cerca pisos",no_results_found:"Sense resultats",close:"Tanca"},es:{tags:"Etiquetas",placemarks:"Marcas de posicin",floors:"Pisos",search:"Buscar",search_tags:"Buscar etiquetas",search_placemarks:"Buscar marcas de posicin",search_floors:"Buscar pisos",no_results_found:"No se han encontrado resultados",close:"Cerrar"},cs:{tags:"Tagy",placemarks:"Znaky mst",floors:"Patra",search:"Hledat",search_tags:"Hledat tagy",search_placemarks:"Hledat znaky mst",search_floors:"Hledat patra",no_results_found:"Nebyly nalezeny dn vsledky",close:"Zavt"},de:{tags:"Stichworte",placemarks:"Ortsmarken",floors:"Etagen",search:"Suche",search_tags:"Such-Tags",search_placemarks:"In den Ortsmarken (Rumen, Slen) suchen",search_floors:"In den Stockwerken suchen",no_results_found:"Keine Ergebnisse gefunden",close:"Schlieen"},fr:{tags:"Mots cls",placemarks:"Repres",floors:"tages",search:"Rechercher",search_tags:"Rechercher des mots cls",search_placemarks:"Rechercher des repres",search_floors:"Rechercher des tages",no_results_found:"Aucun rsultat trouv",close:"Fermer"},it:{tags:"Tag",placemarks:"Segnaposto",floors:"Piani",search:"Cerca",search_tags:"Cerca tag",search_placemarks:"Cerca segnaposto",search_floors:"Cerca piani",no_results_found:"Nessun risultato trovato",close:"Chiudi"},iw:{tags:"",placemarks:" ",floors:"",search:"",search_tags:" ",search_placemarks:"  ",search_floors:" ",no_results_found:"  ",close:""},ja:{tags:"",placemarks:"",floors:"",search:"",search_tags:"",search_placemarks:"",search_floors:"",no_results_found:"",close:""},ko:{tags:"",placemarks:"<",floors:"",search:"",search_tags:"<",search_placemarks:" <",search_floors:"<",no_results_found:" <",close:""},nl:{tags:"Tags",placemarks:"Plaatsaanduidingen",floors:"Verdiepingen",search:"Zoeken",search_tags:"Zoek tags",search_placemarks:"Zoek plaatsaanduidingen",search_floors:"Zoek verdiepingen",no_results_found:"Geen resultaten gevonden",close:"Sluiten"},no:{tags:"Tagger",placemarks:"Stedsmarkeringer",floors:"Gulv",search:"Sk",search_tags:"Sk i etiketter",search_placemarks:"Sk i stedsmarkeringer",search_floors:"Sk i etasjer",no_results_found:"Ingen resultater",close:"Lukk"},pt:{tags:"Tags",placemarks:"Marcadores",floors:"Andares",search:"Procurar",search_tags:"Tags de pesquisa",search_placemarks:"Pesquisar marcadores",search_floors:"Pesquisar andares",no_results_found:"Nenhum resultado encontrado",close:"Perto"},ru:{tags:"Taggar",placemarks:"Platsmrken",floors:"Golv",search:"Sk",search_tags:"Sk taggar",search_placemarks:"Sk efter platsmrken",search_floors:"Sk Golv",no_results_found:"Inga resultat funna",close:"Stnga"},sv:{tags:"Taggar",placemarks:"Platsmrken",floors:"Golv",search:"Sk",search_tags:"Sk taggar",search_placemarks:"Sk efter platsmrken",search_floors:"Sk Golv",no_results_found:"Inga resultat funna",close:"Stnga"},uk:{tags:"",placemarks:"",floors:"",search:"",search_tags:" ",search_placemarks:" ",search_floors:" ",no_results_found:"  ",close:""},vi:{tags:"Th",placemarks:"Du v tr",floors:"Tng",search:"Tm kim ",search_tags:"Th tm kim",search_placemarks:"Du v tr tm kim",search_floors:"Tng tm kim",no_results_found:"Khng c kt qu no c tm thy",close:"ng"},"zh-cn":{tags:"",placemarks:"",floors:"",search:"",search_tags:"",search_placemarks:"",search_floors:"",no_results_found:"",close:""},"zh-tw":{tags:"",placemarks:"",floors:"",search:"",search_tags:"",search_placemarks:"",search_floors:"",no_results_found:"",close:""}};t.default={lookup:function(e,t){var s,o,r;const i=t||(navigator.languages&&navigator.languages[0]||navigator.language||"en").toLowerCase(),n=null!==(s=i.split("-").shift())&&void 0!==s?s:"en",l=a;return(null===(o=null==l?void 0:l[i])||void 0===o?void 0:o[e])||(null===(r=null==l?void 0:l[n])||void 0===r?void 0:r[e])||l.en[e]||e}}},5481:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=a(5403),o=a(2785),r=({onClick:e,dir:t})=>"in"===t?(0,s.h)("button",{className:(0,o.cx)("meridian-zoom-button","meridian-zoom-button-in",l),"data-testid":"meridian--private--zoom-button-in",onClick:e},(0,s.h)("svg",{viewBox:"0 0 36 36"},(0,s.h)("path",{d:"M26 17h-7v-7a1 1 0 0 0-2 0v7h-7a1 1 0 0 0 0 2h7v7a1 1 0 0 0 2 0v-7h7a1 1 0 0 0 0-2"}))):(0,s.h)("button",{className:(0,o.cx)("meridian-zoom-button","meridian-zoom-button-out",c),"data-testid":"meridian--private--zoom-button-out",onClick:e},(0,s.h)("svg",{viewBox:"0 0 36 36"},(0,s.h)("path",{d:"M26 19H10a1 1 0 0 1 0-2h16a1 1 0 0 1 0 2"}))),i=(0,o.css)(o.mixins.shadow,o.mixins.rounded,{position:"absolute",display:"flex",flexDirection:"column",zIndex:1,right:15,bottom:15}),n=(0,o.css)(o.mixins.buttonReset,o.mixins.focusRing,o.mixins.buttonHoverActive,o.mixins.rounded,{cursor:"pointer",padding:4,width:40,height:40,border:0,fontSize:20,fontWeight:200,fill:o.theme.brandBrightBlue,background:"white"}),l=(0,o.css)(n,{borderBottomLeftRadius:0,borderBottomRightRadius:0,borderBottom:`1px solid ${o.theme.buttonSeparatorColor}`}),c=(0,o.css)(n,{borderTopLeftRadius:0,borderTopRightRadius:0});t.default=({onZoomIn:e,onZoomOut:t})=>(0,s.h)("div",{className:(0,o.cx)("meridian-zoom-controls",i)},(0,s.h)(r,{onClick:e,dir:"in"}),(0,s.h)(r,{onClick:t,dir:"out"}))},5396:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendAnalyticsCodeEvent=void 0;const s=a(4221),o=window.devicePixelRatio||1,r=window.screen,i=`${r.width*o}x${r.height*o}`;t.sendAnalyticsCodeEvent=async function(e){if("Cypress"in window)return;const{action:t,locationID:a,onTagsUpdate:o=!1,tagsFilter:r=!1,placemarksFilter:n=!1,internalUpdate:l=!1}=e,c={session_id:a,v:"1",app_name:"MeridianSDK",data_src:"app",app_version:s.version,uid:a,cid:a,hit_type:"event",event_category:"code",event_action:t,event_value:1,event_label:l?"internal":"external",tag_update:o?1:0,tags_filter:r?1:0,placemarks_filter:n?1:0,language:navigator.language,screen_res:i,anonymize_ip:1,user_agent:window.navigator.userAgent,z:Math.random().toString(36).substring(7)};fetch("https://www.google-analytics.com/mp/collect?measurement_id=G-GCT86YZLFE&api_secret=1v79k_rPSLyvvcHpzSDqFQ",{method:"POST",body:JSON.stringify({client_id:a,events:[{name:"page_event",params:Object.assign({},c)}]})})}},2785:function(e,t,a){"use strict";var s,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.css=t.keyframes=t.cx=t.mixins=t.theme=void 0;const r=o(a(9918));t.theme={fontSizeSmallest:"12px",fontSizeSmaller:"14px",fontSize:"16px",fontSizeBigger:"18px",black:"#000",white:"#fff",almostWhite:"#fafafa",textColor:"#1b1b1b",textColorBluishLightGrey:"#9fa8ae",textColorBluish:"hsl(208, 17%, 42%)",brandOrange:"#ff8300",brandBlue:"hsl(203, 100%, 23%)",brandBrightBlue:"hsl(207, 65%, 46%)",buttonActiveColor:"hsl(201, 55%, 94%)",buttonHoverColor:"hsl(200, 60%, 97%)",buttonSeparatorColor:"#f0f0f0",borderColor:"#ebeef2",borderColorDarker:"#dfe1e5",borderRadius:6,searchBarColor:"#297BC0"},t.mixins={flexRow:{display:"flex",flexDirection:"row"},flexColumn:{display:"flex",flexDirection:"column"},overflowEllipses:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},textStrokeWhite:{WebkitFontSmoothing:"antialiased",textShadow:["rgba(255, 255, 255, 0.5) 1px 1px 0","rgba(255, 255, 255, 0.5) -1px -1px 0","white 0 0 1px","white 0 0 2px","white 0 0 3px","white 0 0 4px"].join(", ")},buttonReset:{padding:0,margin:0,font:"inherit",border:0,borderRadius:0,background:"transparent",color:"inherit","&::-moz-focus-inner":{border:0}},buttonHoverActive:{"&:hover":{background:t.theme.buttonHoverColor},"&:active":{background:t.theme.buttonActiveColor}},borderBox:{boxSizing:"border-box"},focusRing:{"&:focus":{outline:0,boxShadow:`inset 0 0 0 1px ${t.theme.brandBrightBlue}`}},focusRingMenuItem:{"&:focus":{outline:0,boxShadow:`\n        inset 0 0 0 1px white,\n        inset 0 0 0 2px ${t.theme.brandBrightBlue}\n      `}},focusOutline:{"&:focus":{outline:0,boxShadow:"0 0 0 2px currentcolor"}},focusDarken:{"&:focus":{outline:0,boxShadow:"inset 0 0 0 9999px rgba(0, 0, 0, 0.1)"}},focusNone:{"&:focus":{outline:"none"}},shadow:{boxShadow:"0 0 3px rgba(0, 0, 0, 0.25)"},rounded:{borderRadius:t.theme.borderRadius},maxRounded:{borderRadius:99999},paddingMedium:{padding:"20px"},pointer:{cursor:"pointer","&:disabled":{cursor:"default"}}},s=(0,r.default)({key:"meridian--private-"}),t.cx=s.cx,t.keyframes=s.keyframes,t.css=s.css},7746:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debouncedPlacemarkSearch=t.placemarkSearchParams=t.cleanQuery=t.isEnvOptions=t.asyncClientCall=t.requiredParam=t.getPlacemarkCategories=t.getTagLabels=t.createSearchMatcher=t.keyBy=t.objectWithoutKey=t.uiText=t.logDeprecated=t.logError=t.logWarn=void 0;const a="[@meridian/web-sdk]";t.logWarn=console.warn.bind(console,a),t.logError=console.error.bind(console,a),t.logDeprecated=t.logWarn.bind(null,"[deprecated]"),t.uiText={enDash:"",unnamedBuilding:"Unassigned"},t.objectWithoutKey=function(e,t){const a=Object.assign({},e);return delete a[t],a},t.keyBy=function(e,t){const a={};for(const s of e)a[t(s)]=s;return a},t.createSearchMatcher=function(e){return t=>t.toLowerCase().indexOf(e.toLowerCase().trim())>=0},t.getTagLabels=function(e){return(e.tags||[]).map((e=>e.name))},t.getPlacemarkCategories=function(e){return(e.categories||[]).map((e=>e.name))},t.requiredParam=function(e,a){(0,t.logError)(`${e}: argument \`${a}\` is required`)},t.asyncClientCall=function(e,...t){setTimeout(e,0,...t)},t.isEnvOptions=function(e){return"staging"===e||"production"===e||"eu"===e||"development"===e||"devCloud"===e},t.cleanQuery=function(e){return e.replace(/-/g," ").replace(/:/g," ").replace(/[\\)"(]/g," ").replace(/[ ]{2,}/g," ").trim()},t.placemarkSearchParams="is_map_published=true AND kind:placemark AND NOT is_searchable=false AND NOT type=exclusion_area",t.debouncedPlacemarkSearch=function e(t,a=0){let s,o,r;return function(...t){return o?(r=!0,new Promise((r=>{o=r,s=setTimeout(i.bind(e,t,r),a)}))):new Promise((r=>{o=r,s=setTimeout(i.bind(e,t,r),a)}))};function i(a,i){r&&i!==o?i(null):(t.apply(e,a).then(i).catch(i),r=!1,clearTimeout(s),s=o=null)}}},4221:function(e,t,a){"use strict";var s,o,r,i=this&&this.__classPrivateFieldGet||function(e,t,a,s){if("a"===a&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?s:"a"===a?s.call(e):s?s.value:t.get(e)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.API=t.createAPI=t.createMap=t.init=t.mapPointToLatLng=t.latLngToMapPoint=t.restrictedPanZoom=t.version=t.pointsFromArea=t.placemarkIconURL=void 0;const l=n(a(8938)),c=n(a(6928)),d=a(5403),p=n(a(4717)),h=n(a(9101)),u=a(5396),m=n(a(529)),g=a(7746),f=a(323),v=new Map;for(const e of f.keys()){const t=c.default.basename(e,".svg"),a=f(e).default;v.set(t,a)}t.placemarkIconURL=function(e){if(!e||e.startsWith("label_"))return h.default;return v.get(e)||((0,g.logError)(`placemarkIconURL: no such icon '${e}'`),h.default)},t.pointsFromArea=function(e){return e?e.split(",").map(Number):[]};const k=()=>a(3351);"complete"===document.readyState?setTimeout(k,0):document.addEventListener("DOMContentLoaded",k,!1);const b={api:void 0};t.version="1.22.7",t.restrictedPanZoom=function(e){return"wheel"===e.type?e.shiftKey||e.altKey||e.ctrlKey||e.metaKey:"touch"!==e.type||e.touches.length>=2},t.latLngToMapPoint=function(e,{lat:t,lng:a}){const s=t,o=a,r=[];e.gps_ref_points.split(",").forEach((e=>{r.push(Number(e))}));const i={lat:r[0],lng:r[1],x:r[4],y:r[5]},n={lat:r[2],lng:r[3],x:r[6],y:r[7]},l=6371;i.globalCoordinateX=l*i.lng*Math.cos((i.lat+n.lat)/2),i.globalCoordinateY=l*i.lat,n.globalCoordinateX=l*n.lng*Math.cos((i.lat+n.lat)/2),n.globalCoordinateY=l*n.lat;const c=l*s,d=(l*o*Math.cos((i.lat+n.lat)/2)-i.globalCoordinateX)/(n.globalCoordinateX-i.globalCoordinateX),p=(c-i.globalCoordinateY)/(n.globalCoordinateY-i.globalCoordinateY);return{x:i.x+(n.x-i.x)*d,y:i.y+(n.y-i.y)*p}},t.mapPointToLatLng=function(e,{x:t,y:a}){const s=[];e.gps_ref_points.split(",").forEach((e=>{s.push(Number(e))}));const o={lat:s[0],lng:s[1],x:s[4],y:s[5]},r={lat:s[2],lng:s[3],x:s[6],y:s[7]},i=o.lng,n=r.lng-i,l=function(){let e;return e=o.y<r.y?r.lat:o.lat,e}()*Math.PI/180,c=e.width/n*360/(2*Math.PI),d=c/2*Math.log((1+Math.sin(l))/(1-Math.sin(l))),p=(e.height+d-a)/c;return{lat:180/Math.PI*(2*Math.atan(Math.exp(p))-Math.PI/2),lng:i+t/e.width*n}},t.init=function(e){e||(0,g.requiredParam)("init","options"),e.api||(0,g.requiredParam)("init","options.api"),b.api=e.api},t.createMap=function(e,t){e||(0,g.requiredParam)("createMap","node"),t||(0,g.requiredParam)("createMap","options");const a=()=>{l.isDestroyed?(0,g.logError)("can't call update on a destroyed MeridianMap"):(l.isDestroyed=!0,(0,d.render)(null,e),t.onDestroy&&t.onDestroy())};let s=null;const o=e=>{s=e},r=(s,{internalUpdate:i=!0}={})=>{t=Object.assign(Object.assign({},t),s);const l=b.api||t.api;if(!l)throw(0,g.requiredParam)("createMap","options.api"),new Error("couldn't create MeridianMap");n=(0,d.render)((0,d.h)(m.default,Object.assign({api:l},t,{update:r,ref:o,destroy:a})),e,n),(0,u.sendAnalyticsCodeEvent)({action:"map.update",locationID:t.locationID,onTagsUpdate:Boolean(t.onTagsUpdate),tagsFilter:Boolean(t.tags&&t.tags.filter),placemarksFilter:Boolean(t.placemarks&&t.placemarks.filter),internalUpdate:i})},i=b.api||t.api;if(!i)throw(0,g.requiredParam)("createMap","options.api"),new Error("couldn't create MeridianMap");let n=(0,d.render)((0,d.h)(m.default,Object.assign({api:i},t,{update:r,ref:o,destroy:a})),e);(0,u.sendAnalyticsCodeEvent)({action:"createMap",locationID:t.locationID,onTagsUpdate:Boolean(t.onTagsUpdate),tagsFilter:Boolean(t.tags&&t.tags.filter),placemarksFilter:Boolean(t.placemarks&&t.placemarks.filter)});const l={destroy:a,isDestroyed:!1,update:e=>{l.isDestroyed?(0,g.logError)("can't call update on a destroyed MeridianMap"):r(e,{internalUpdate:!1})},zoomToDefault:()=>{l.isDestroyed?(0,g.logError)("can't call zoomToDefault on a destroyed MeridianMap"):null==s||s.zoomToDefault()},zoomToPoint:e=>{l.isDestroyed?(0,g.logError)("can't call update on a destroyed MeridianMap"):(e||(0,g.requiredParam)("map.zoomToPoint","options"),void 0===e.x&&(0,g.requiredParam)("map.zoomToPoint","options.x"),void 0===e.y&&(0,g.requiredParam)("map.zoomToPoint","options.y"),void 0===e.scale&&(0,g.requiredParam)("map.zoomToPoint","options.scale"),null==s||s.zoomToPoint(e.x,e.y,e.scale))},centerMap:()=>{l.isDestroyed?(0,g.logError)("can't call update on a destroyed MeridianMap"):null==s||s.centerMap()}};return l},t.createAPI=function(e){return(0,g.logDeprecated)("use `new MeridianSDK.API(options)` instead of `MeridianSDK.createAPI(options)`"),e||(0,g.requiredParam)("createAPI","options"),new y(e)};class y{constructor(e){var a;s.add(this),this.debouncedPlacemarkSearchBeta=(0,g.debouncedPlacemarkSearch)(i(this,s,"m",o).bind(this),600),e.token||(0,g.requiredParam)("API","token"),this.token=e.token,this.environment=("devcloud"===(a=e.environment)?"devCloud":a)||"production",this.language=e.language,this._placemarkSearchAbortController=null,this._localSearchAbortController=null;let r={};this.language&&(r={"accept-language":this.language}),this._axiosEditorAPI=l.default.create({baseURL:C[this.environment],headers:Object.assign({Authorization:`Token ${e.token}`,"Meridian-SDK":`WebSDK/${t.version}`},r)}),this._axiosTagsAPI=l.default.create({baseURL:x[this.environment],headers:{Authorization:`Token ${e.token}`}}),this._axiosTagDetailAPI=l.default.create({baseURL:O[this.environment],headers:{Authorization:`Token ${e.token}`}})}get axios(){return(0,g.logDeprecated)("axios is deprecated; use the MeridianSDK.API fetch methods"),this._axiosEditorAPI}async getDirections(e){e.locationID||(0,g.requiredParam)("getDirections","locationID"),e.startFloorID||(0,g.requiredParam)("getDirections","startFloorID"),e.startPlacemarkID||(0,g.requiredParam)("getDirections","startPlacemarkID"),e.endPlacemarkID||(0,g.requiredParam)("getDirections","endPlacemarkID");const t=new URLSearchParams({from_map_id:e.startFloorID,from_placemark_id:e.startPlacemarkID,to_placemark_ids:e.endPlacemarkID,transport_type:e.transportType||"normal"}),a=`/locations/${e.locationID}/directions?${t}`;return(await this._axiosEditorAPI.get(a)).data}async fetchTagsByFloor(e,t){return e||(0,g.requiredParam)("fetchTagsByFloor","locationID"),t||(0,g.requiredParam)("fetchTagsByFloor","floorID"),(await this._axiosTagsAPI.post("/assets",{floor_id:t,location_id:e})).data.asset_updates}async fetchTagsByLocation(e){return e||(0,g.requiredParam)("fetchTagsByLocation","locationID"),(await this._axiosTagsAPI.post("/assets",{location_id:e})).data.asset_updates}async fetchTagDetail(e){return e||(0,g.requiredParam)("fetchTagDetail","mac"),(await this._axiosTagDetailAPI.get(`/tagsinfo/detail/${e}`)).data}async fetchPlacemarksByLocation(e){return e||(0,g.requiredParam)("fetchPlacemarksByLocation","locationID"),await _((async e=>{const{data:t}=await this._axiosEditorAPI.get(e);return t}),`locations/${e}/placemarks`)}async fetchPlacemarksByFloor(e,t){return e||(0,g.requiredParam)("fetchPlacemarksByFloor","locationID"),t||(0,g.requiredParam)("fetchPlacemarksByFloor","floorID"),await _((async e=>{const{data:t}=await this._axiosEditorAPI.get(e);return t}),`locations/${e}/maps/${t}/placemarks`)}async fetchFloorsByLocation(e){return e||(0,g.requiredParam)("fetchFloorsByLocation","locationID"),await _((async e=>{const{data:t}=await this._axiosEditorAPI.get(e);return t}),`locations/${e}/maps`)}async fetchFloorData(e,t){e||(0,g.requiredParam)("fetchFloorData","locationID"),t||(0,g.requiredParam)("fetchFloorData","floorID");const a=`locations/${e}/maps/${t}`,{data:s}=await this._axiosEditorAPI.get(a);return s}async fetchSVG(e){e||(0,g.requiredParam)("fetchSVG","svgURL");const{data:t}=await this._axiosEditorAPI.get(e,{responseType:"blob"});return URL.createObjectURL(t)}openStream({locationID:e,floorID:t,resourceIDs:a,resourceType:s="FLOOR",onInitialTags:o=(()=>{}),onTagUpdate:r=(()=>{}),onException:i=(()=>{}),onClose:n=(()=>{}),onOpen:l=(()=>{})}){"FLOOR"===s&&t&&!a&&(a=[t]),"LOCATION"===s&&e&&!a&&(a=[e]),e||(0,g.requiredParam)("openStream","locationID"),"FLOOR"!==s||t||(0,g.requiredParam)("openStream","floorID"),a||(0,g.requiredParam)("openStream","resourceIDs");let c=!1;const d=new URLSearchParams({method:"POST",authorization:`Token ${this.token}`}),h=w[this.environment],u=new p.default(`${h}?${d}`),m={asset_requests:[{resource_type:s,location_id:e,resource_ids:a}]},f=()=>{c||(c=!0,(0,g.asyncClientCall)(n),u.close())};return u.addEventListener("open",(()=>{c||(l(),u.send(JSON.stringify(m)))})),u.addEventListener("message",(e=>{if(c)return;const t=JSON.parse(e.data);if(t.error)i(new Error(t.error.message));else{if(!t.result)throw new Error(`Unknown message: ${e.data}`);for(const e of t.result.asset_updates){const t=e.event_type;if("UPDATE"!==t)throw new Error(`Unknown event type: ${t}`);(0,g.asyncClientCall)(r,e)}}})),u.addEventListener("error",(()=>{c||i(new Error("MeridianSDK.openStream connection error"))})),u.addEventListener("close",(()=>{c||n()})),(async()=>{if(t&&"FLOOR"===s)try{const a=await this.fetchTagsByFloor(e,t);(0,g.asyncClientCall)(o,a)}catch(e){(0,g.asyncClientCall)(i,e),f()}else if(e&&"LOCATION"===s)try{const t=await this.fetchTagsByLocation(e);(0,g.asyncClientCall)(o,t)}catch(e){(0,g.asyncClientCall)(i,e),f()}else(0,g.asyncClientCall)(o,[])})(),{close:f}}}async function _(e,t){const a=await e(t),s=a.results;let o=a.next;for(;o;){const t=await e(o);s.push(...t.results),o=t.next}return s}t.API=y,s=new WeakSet,o=async function(e){const t=(0,g.cleanQuery)(e.searchStr);if(e.locationID||(0,g.requiredParam)("placemarkSearch","locationID"),this._placemarkSearchAbortController&&this._placemarkSearchAbortController.abort(),this._localSearchAbortController&&this._localSearchAbortController.abort(),!t)return[];this._placemarkSearchAbortController=new AbortController;const a=new URLSearchParams({q:`${t} AND (${g.placemarkSearchParams})`,page_size:"100"});try{return await this._axiosEditorAPI.get(`locations/${e.locationID}/search`,{signal:this._placemarkSearchAbortController.signal,params:a}).then((async a=>{const o=a.data.results;if(e.refPoint&&e.refFloorID&&o.length){const a=await i(this,s,"m",r).call(this,{locationID:e.locationID,searchStr:t,point:e.refPoint,mapID:e.refFloorID}),n=[],l=a.map((e=>e.id));return o.forEach((e=>{l.includes(e.id)||n.push(e)})),this._placemarkSearchAbortController=null,[...a,...n]}return this._placemarkSearchAbortController=null,o}))}catch(e){return"canceled"===e.message?null:(console.warn(e),[])}},r=async function(e){const t=(0,g.cleanQuery)(e.searchStr);if(this._localSearchAbortController&&this._localSearchAbortController.abort(),!t)return[];this._localSearchAbortController=new AbortController;const a=new URLSearchParams({q:`${t} AND (${g.placemarkSearchParams})`,limit:"10",appid:e.locationID,map_id:e.mapID,point:e.point});return this._axiosEditorAPI.get("search/local",{signal:this._localSearchAbortController.signal,params:a}).then((e=>(this._localSearchAbortController=null,e.data.results)))};const x={development:"http://localhost:8091/api/v1",devCloud:"https://dev-tags.meridianapps.com/api/v1",production:"https://tags.meridianapps.com/api/v1",eu:"https://tags-eu.meridianapps.com/api/v1",staging:"https://staging-tags.meridianapps.com/api/v1"},O={development:"http://localhost:8091/api",devCloud:"https://dev-tags.meridianapps.com/api",production:"https://tags.meridianapps.com/api",eu:"https://tags-eu.meridianapps.com/api",staging:"https://staging-tags.meridianapps.com/api"},w={development:"ws://localhost:8091/streams/v1/assets",devCloud:"wss://dev-tags.meridianapps.com/streams/v1/assets",production:"wss://tags.meridianapps.com/streams/v1/assets",eu:"wss://tags-eu.meridianapps.com/streams/v1/assets",staging:"wss://staging-tags.meridianapps.com/streams/v1/assets"},C={development:"http://localhost:8091/api",devCloud:"https://dev-edit.meridianapps.com/api",production:"https://edit.meridianapps.com/api",eu:"https://edit-eu.meridianapps.com/api",staging:"https://staging-edit.meridianapps.com/api"}},9918:e=>{"use strict";e.exports=require("@emotion/css/create-instance")},8938:e=>{"use strict";e.exports=require("axios")},4870:e=>{"use strict";e.exports=require("d3-selection")},3755:e=>{"use strict";e.exports=require("d3-transition")},5491:e=>{"use strict";e.exports=require("d3-zoom")},9862:e=>{"use strict";e.exports=require("lodash.debounce")},3669:e=>{"use strict";e.exports=require("lodash.groupby")},1389:e=>{"use strict";e.exports=require("lodash.throttle")},5403:e=>{"use strict";e.exports=require("preact")},3351:e=>{"use strict";e.exports=require("preact/debug")},4717:e=>{"use strict";e.exports=require("reconnecting-websocket")},6928:e=>{"use strict";e.exports=require("path")}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,a),r.exports}a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="https://files.meridianapps.com/meridian-web-sdk/1.22.7/";var s=a(4221),o=exports;for(var r in s)o[r]=s[r];s.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();